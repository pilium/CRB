"use strict";document.addEventListener("DOMContentLoaded",function(){function e(){var e=new Date,t={year:"numeric",month:"long",day:"numeric"};document.querySelector(".js-footer-info__date").innerHTML=e.toLocaleString("ru",t)}var t=document.getElementById("preloader");t&&setTimeout(function(){t.classList.add("active"),document.body.style.overflow="visible"},3e3);var o=document.querySelector(".header-actions__search"),n=o.querySelector(".icon-magnifier-tool"),s=o.querySelector("[type=text]"),a=document.querySelector(".swiper-container"),i=document.querySelector(".blog-slider"),l=document.querySelector(".news-slider"),r=document.getElementById("map"),c=document.querySelector(".js-header-info__writeToUs-link"),d=document.querySelector(".modal"),u=d.querySelector(".modal-close__btn"),m=d.querySelector("[name=login]"),f=document.querySelector(".testimonials-slider");if(a){new Swiper(".swiper-container",{loop:!0,parallax:!0,autoplay:{delay:5e3},speed:1e3,mousewheelControl:!0})}if(i){new Swiper(".blog-slider",{spaceBetween:30,effect:"fade",loop:!0,grabCursor:!0,autoplay:{delay:7e3},pagination:{el:".blog-slider__pagination",clickable:!0}})}if(r){var v=function(){var e=new ymaps.Map("map",{center:[47.5396,42.0151],controls:["typeSelector","fullscreenControl","geolocationControl","rulerControl","routeButtonControl"],zoom:16});e.controls.get("routeButtonControl").routePanel.state.set("from","Романовская союзный 97а");var t=new ymaps.Placemark([47.5398,42.0153],{hintContent:"Ул. Союзная 97а",balloonContent:"Поликлиника"},{preset:"islands#blueMedicalIcon"});e.geoObjects.add(t)};ymaps.ready(v)}var g=document.querySelector(".wrapper-menu"),p=document.querySelector(".sidenav"),w=document.querySelector(".sidenav-overlay");g&&g.addEventListener("click",function(){g.classList.toggle("open"),p.classList.toggle("show"),w.classList.toggle("show")}),document.addEventListener("click",function(e){e.target.classList.contains("sidenav-overlay")&&(g.classList.toggle("open"),p.classList.toggle("show"),w.classList.toggle("show"))});var y,L=document.getElementsByClassName("acc-header");for(y=0;y<L.length;y++)L[y].addEventListener("click",function(e){e.preventDefault(),this.classList.toggle("active"),this.nextElementSibling.classList.toggle("active")});if(setTimeout(e,100),function(){n.addEventListener("click",function(){e(),s.focus()}),document.addEventListener("keydown",function(e){27==e.keyCode&&o.classList.contains("active")&&o.classList.remove("active")}),document.addEventListener("click",function(t){var n=t.target,s=n==o||o.contains(n),a=o.classList.contains("active");!s&&a&&e()});var e=function(){o.classList.toggle("active")}}(),function(){var e=document.querySelector(".modal-overlay");c.addEventListener("click",function(t){t.preventDefault(),d.classList.toggle("modal-show"),e.classList.toggle("show"),m.focus()}),u.addEventListener("click",function(t){t.preventDefault(),d.classList.remove("modal-show"),e.classList.toggle("show")}),document.addEventListener("click",function(t){t.target.classList.contains("modal-overlay")&&(d.classList.remove("modal-show"),e.classList.toggle("show"))})}(),l){new Swiper(".news-slider",{effect:"coverflow",grabCursor:!0,loop:!1,centeredSlides:!1,keyboard:!0,spaceBetween:10,slidesPerView:"3",speed:300,coverflowEffect:{rotate:0,stretch:0,depth:0,modifier:1,slideShadows:!1},breakpoints:{1024:{slidesPerView:2},800:{slidesPerView:1},480:{spaceBetween:0,centeredSlides:!0}},simulateTouch:!0,navigation:{nextEl:".news-slider-next",prevEl:".news-slider-prev"},pagination:{el:".news-slider__pagination",clickable:!0}})}if(f){new Swiper(f,{autoHeight:!0,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}!function(){for(var e=document.querySelectorAll(".material-card > .mc-btn-action"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){var e=this.parentNode,t=this.querySelector("i");t.classList.add("fa-spin-fast"),e.classList.contains("mc-active")?(e.classList.remove("mc-active"),setTimeout(function(){t.classList.remove("fa-arrow-left"),t.classList.remove("fa-spin-fast"),t.classList.add("fa-bars")},800)):(e.classList.add("mc-active"),setTimeout(function(){t.classList.remove("fa-bars"),t.classList.remove("fa-spin-fast"),t.classList.add("fa-arrow-left")},800))})}(),document.querySelector(".gallery")&&baguetteBox.run(".gallery-wrap",{async:!0});for(var S=document.querySelectorAll("form"),h=0;h<S.length;h++)!function(e){S[e].onsubmit=function(t){t.preventDefault(),S[e].classList.add("signed")}}(h)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhZGRUaW1lRm9vdGVyIiwiZGF0ZSIsIkRhdGUiLCJvcHRpb25zIiwieWVhciIsIm1vbnRoIiwiZGF5IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsInRvTG9jYWxlU3RyaW5nIiwicHJlbG9hZGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJzZXRUaW1lb3V0IiwiY2xhc3NMaXN0IiwiYWRkIiwiYm9keSIsInN0eWxlIiwib3ZlcmZsb3ciLCJjb250YWluZXIiLCJzZWFyY2giLCJpbnB1dCIsInNsaWRlckNvbnRhaW5lciIsImJsb2dTbGlkZXIiLCJuZXdzU2xpZGVyIiwibWFwQ29udGFpbmVyIiwibGluayIsInBvcHVwIiwiY2xvc2UiLCJsb2dpbiIsInRlc3RpbW9uaWFsc1NsaWRlciIsIlN3aXBlciIsImxvb3AiLCJwYXJhbGxheCIsImF1dG9wbGF5IiwiZGVsYXkiLCJzcGVlZCIsIm1vdXNld2hlZWxDb250cm9sIiwic3BhY2VCZXR3ZWVuIiwiZWZmZWN0IiwiZ3JhYkN1cnNvciIsInBhZ2luYXRpb24iLCJlbCIsImNsaWNrYWJsZSIsImluaXQiLCJteU1hcCIsInltYXBzIiwiTWFwIiwiY2VudGVyIiwiY29udHJvbHMiLCJ6b29tIiwiZ2V0Iiwicm91dGVQYW5lbCIsInN0YXRlIiwic2V0IiwibXlQbGFjZW1hcmsiLCJQbGFjZW1hcmsiLCJoaW50Q29udGVudCIsImJhbGxvb25Db250ZW50IiwicHJlc2V0IiwiZ2VvT2JqZWN0cyIsInJlYWR5Iiwid3JhcHBlck1lbnUiLCJzaWRlbmF2Iiwib3ZlcmxheSIsInRvZ2dsZSIsImUiLCJ0YXJnZXQiLCJjb250YWlucyIsImkiLCJhY2MiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibGVuZ3RoIiwicHJldmVudERlZmF1bHQiLCJ0aGlzIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwidG9nZ2xlX3NlYXJjaF9jbGFzcyIsImZvY3VzIiwiZXZlbnQiLCJrZXlDb2RlIiwicmVtb3ZlIiwiaXRzX2NvbnRhaW5lciIsInNlYXJjaF9pc19hY3RpdmUiLCJjZW50ZXJlZFNsaWRlcyIsImtleWJvYXJkIiwic2xpZGVzUGVyVmlldyIsImNvdmVyZmxvd0VmZmVjdCIsInJvdGF0ZSIsInN0cmV0Y2giLCJkZXB0aCIsIm1vZGlmaWVyIiwic2xpZGVTaGFkb3dzIiwiYnJlYWtwb2ludHMiLCIxMDI0IiwiODAwIiwiNDgwIiwic2ltdWxhdGVUb3VjaCIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJhdXRvSGVpZ2h0IiwicGVvcGxlQ2FyZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfaSIsImNhcmQiLCJwYXJlbnROb2RlIiwiaWNvbiIsImJhZ3VldHRlQm94IiwicnVuIiwiYXN5bmMiLCJmb3JtcyIsIl9pMiIsIm9uc3VibWl0Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUVBQSxVQUFBQyxpQkFBQSxtQkFBQSxXQXNJQSxRQUFBQyxLQUNBLEdBQUFDLEdBQUEsR0FBQUMsTUFDQUMsR0FDQUMsS0FBQSxVQUNBQyxNQUFBLE9BQ0FDLElBQUEsVUFFQVIsVUFBQVMsY0FBQSx5QkFDQUMsVUFBQVAsRUFBQVEsZUFBQSxLQUFBTixHQTVJQSxHQUFBTyxHQUFBWixTQUFBYSxlQUFBLFlBRUFELElBQ0FFLFdBQUEsV0FDQUYsRUFBQUcsVUFBQUMsSUFBQSxVQUNBaEIsU0FBQWlCLEtBQUFDLE1BQUFDLFNBQUEsV0FDQSxJQUlBLElBQUFDLEdBQUFwQixTQUFBUyxjQUFBLDJCQUNBWSxFQUFBRCxFQUFBWCxjQUFBLHdCQUNBYSxFQUFBRixFQUFBWCxjQUFBLGVBQ0FjLEVBQUF2QixTQUFBUyxjQUFBLHFCQUNBZSxFQUFBeEIsU0FBQVMsY0FBQSxnQkFDQWdCLEVBQUF6QixTQUFBUyxjQUFBLGdCQUNBaUIsRUFBQTFCLFNBQUFhLGVBQUEsT0FDQWMsRUFBQTNCLFNBQUFTLGNBQUEsbUNBQ0FtQixFQUFBNUIsU0FBQVMsY0FBQSxVQUNBb0IsRUFBQUQsRUFBQW5CLGNBQUEscUJBQ0FxQixFQUFBRixFQUFBbkIsY0FBQSxnQkFDQXNCLEVBQUEvQixTQUFBUyxjQUFBLHVCQTZEQSxJQUFBYyxFQUNBLENBQUEsR0FBQVMsUUFBQSxxQkFDQUMsTUFBQSxFQUNBQyxVQUFBLEVBQ0FDLFVBQ0FDLE1BQUEsS0FFQUMsTUFBQSxJQUNBQyxtQkFBQSxJQUlBLEdBQUFkLEVBQ0EsQ0FBQSxHQUFBUSxRQUFBLGdCQUNBTyxhQUFBLEdBQ0FDLE9BQUEsT0FDQVAsTUFBQSxFQUNBUSxZQUFBLEVBQ0FOLFVBQ0FDLE1BQUEsS0FHQU0sWUFDQUMsR0FBQSwyQkFDQUMsV0FBQSxLQUtBLEdBQUFsQixFQUFBLENBQ0EsR0FBQW1CLEdBQUEsV0FDQSxHQUFBQyxHQUFBLEdBQUFDLE9BQUFDLElBQUEsT0FDQUMsUUFBQSxRQUFBLFNBQ0FDLFVBQUEsZUFBQSxvQkFBQSxxQkFBQSxlQUFBLHNCQUNBQyxLQUFBLElBRUFMLEdBQUFJLFNBQUFFLElBQUEsc0JBQ0FDLFdBQUFDLE1BQUFDLElBQUEsT0FBQSwwQkFDQSxJQUFBQyxHQUFBLEdBQUFULE9BQUFVLFdBQUEsUUFBQSxVQUNBQyxZQUFBLGtCQUNBQyxlQUFBLGdCQUVBQyxPQUFBLDJCQUVBZCxHQUFBZSxXQUFBN0MsSUFBQXdDLEdBR0FULE9BQUFlLE1BQUFqQixHQWVBLEdBQUFrQixHQUFBL0QsU0FBQVMsY0FBQSxpQkFDQXVELEVBQUFoRSxTQUFBUyxjQUFBLFlBQ0F3RCxFQUFBakUsU0FBQVMsY0FBQSxtQkFDQXNELElBQUFBLEVBQUE5RCxpQkFBQSxRQUFBLFdBQ0E4RCxFQUFBaEQsVUFBQW1ELE9BQUEsUUFDQUYsRUFBQWpELFVBQUFtRCxPQUFBLFFBQ0FELEVBQUFsRCxVQUFBbUQsT0FBQSxVQUVBbEUsU0FBQUMsaUJBQUEsUUFBQSxTQUFBa0UsR0FDQUEsRUFBQUMsT0FBQXJELFVBQUFzRCxTQUFBLHFCQUNBTixFQUFBaEQsVUFBQW1ELE9BQUEsUUFDQUYsRUFBQWpELFVBQUFtRCxPQUFBLFFBQ0FELEVBQUFsRCxVQUFBbUQsT0FBQSxVQUlBLElBQ0FJLEdBREFDLEVBQUF2RSxTQUFBd0UsdUJBQUEsYUFHQSxLQUFBRixFQUFBLEVBQUFBLEVBQUFDLEVBQUFFLE9BQUFILElBQ0FDLEVBQUFELEdBQUFyRSxpQkFBQSxRQUFBLFNBQUFrRSxHQUdBQSxFQUFBTyxpQkFDQUMsS0FBQTVELFVBQUFtRCxPQUFBLFVBR0FTLEtBQUFDLG1CQUNBN0QsVUFBQW1ELE9BQUEsV0FRQSxJQUpBcEQsV0FBQVosRUFBQSxLQXpKQSxXQUNBbUIsRUFBQXBCLGlCQUFBLFFBQUEsV0FDQTRFLElBQ0F2RCxFQUFBd0QsVUFFQTlFLFNBQUFDLGlCQUFBLFVBQUEsU0FBQThFLEdBQ0EsSUFBQUEsRUFBQUMsU0FDQTVELEVBQUFMLFVBQUFzRCxTQUFBLFdBQ0FqRCxFQUFBTCxVQUFBa0UsT0FBQSxZQUlBakYsU0FBQUMsaUJBQUEsUUFBQSxTQUFBa0UsR0FDQSxHQUFBQyxHQUFBRCxFQUFBQyxPQUNBYyxFQUFBZCxHQUFBaEQsR0FBQUEsRUFBQWlELFNBQUFELEdBQ0FlLEVBQUEvRCxFQUFBTCxVQUFBc0QsU0FBQSxXQUVBYSxHQUFBQyxHQUNBTixLQUlBLElBQUFBLEdBQUEsV0FDQXpELEVBQUFMLFVBQUFtRCxPQUFBLGNBSUEsV0FDQSxHQUFBRCxHQUFBakUsU0FBQVMsY0FBQSxpQkFDQWtCLEdBQUExQixpQkFBQSxRQUFBLFNBQUE4RSxHQUNBQSxFQUFBTCxpQkFDQTlDLEVBQUFiLFVBQUFtRCxPQUFBLGNBQ0FELEVBQUFsRCxVQUFBbUQsT0FBQSxRQUNBcEMsRUFBQWdELFVBRUFqRCxFQUFBNUIsaUJBQUEsUUFBQSxTQUFBOEUsR0FDQUEsRUFBQUwsaUJBQ0E5QyxFQUFBYixVQUFBa0UsT0FBQSxjQUNBaEIsRUFBQWxELFVBQUFtRCxPQUFBLFVBRUFsRSxTQUFBQyxpQkFBQSxRQUFBLFNBQUFrRSxHQUNBQSxFQUFBQyxPQUFBckQsVUFBQXNELFNBQUEsbUJBQ0F6QyxFQUFBYixVQUFBa0UsT0FBQSxjQUNBaEIsRUFBQWxELFVBQUFtRCxPQUFBLGNBa0hBekMsRUFDQSxDQUFBLEdBQUFPLFFBQUEsZ0JBQ0FRLE9BQUEsWUFDQUMsWUFBQSxFQUNBUixNQUFBLEVBQ0FtRCxnQkFBQSxFQUNBQyxVQUFBLEVBQ0E5QyxhQUFBLEdBQ0ErQyxjQUFBLElBQ0FqRCxNQUFBLElBQ0FrRCxpQkFDQUMsT0FBQSxFQUNBQyxRQUFBLEVBQ0FDLE1BQUEsRUFDQUMsU0FBQSxFQUNBQyxjQUFBLEdBRUFDLGFBQ0FDLE1BQ0FSLGNBQUEsR0FFQVMsS0FDQVQsY0FBQSxHQUVBVSxLQUNBekQsYUFBQSxFQUNBNkMsZ0JBQUEsSUFHQWEsZUFBQSxFQUNBQyxZQUNBQyxPQUFBLG9CQUNBQyxPQUFBLHFCQUVBMUQsWUFDQUMsR0FBQSwyQkFDQUMsV0FBQSxLQUtBLEdBQUFiLEVBQ0EsQ0FBQSxHQUFBQyxRQUFBRCxHQUNBc0UsWUFBQSxFQUNBcEUsTUFBQSxFQUNBaUUsWUFDQUMsT0FBQSxzQkFDQUMsT0FBQSwwQkFNQSxXQUdBLElBQUEsR0FGQUUsR0FBQXRHLFNBQUF1RyxpQkFBQSxtQ0FFQUMsRUFBQSxFQUFBQSxFQUFBRixFQUFBN0IsT0FBQStCLElBQ0FGLEVBQUFFLEdBQUF2RyxpQkFBQSxRQUFBLFdBQ0EsR0FBQXdHLEdBQUE5QixLQUFBK0IsV0FDQUMsRUFBQWhDLEtBQUFsRSxjQUFBLElBQ0FrRyxHQUFBNUYsVUFBQUMsSUFBQSxnQkFFQXlGLEVBQUExRixVQUFBc0QsU0FBQSxjQUNBb0MsRUFBQTFGLFVBQUFrRSxPQUFBLGFBQ0FuRSxXQUFBLFdBQ0E2RixFQUFBNUYsVUFBQWtFLE9BQUEsaUJBQ0EwQixFQUFBNUYsVUFBQWtFLE9BQUEsZ0JBQ0EwQixFQUFBNUYsVUFBQUMsSUFBQSxZQUNBLE9BRUF5RixFQUFBMUYsVUFBQUMsSUFBQSxhQUNBRixXQUFBLFdBQ0E2RixFQUFBNUYsVUFBQWtFLE9BQUEsV0FDQTBCLEVBQUE1RixVQUFBa0UsT0FBQSxnQkFDQTBCLEVBQUE1RixVQUFBQyxJQUFBLGtCQUNBLFdBUUFoQixTQUFBUyxjQUFBLGFBR0FtRyxZQUFBQyxJQUFBLGlCQUNBQyxPQUFBLEdBY0EsS0FBQSxHQVZBQyxHQUFBL0csU0FBQXVHLGlCQUFBLFFBVUFTLEVBQUEsRUFBQUEsRUFBQUQsRUFBQXRDLE9BQUF1QyxLQVJBLFNBQUFBLEdBQ0FELEVBQUFDLEdBQUFDLFNBQUEsU0FBQWxDLEdBQ0FBLEVBQUFMLGlCQUVBcUMsRUFBQUMsR0FBQWpHLFVBQUFDLElBQUEsWUFLQWdHIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgLy8gcHJlbG9hZGVyXG4gIHZhciBwcmVsb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJlbG9hZGVyJyk7XG5cbiAgaWYgKHByZWxvYWRlcikge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgcHJlbG9hZGVyLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICd2aXNpYmxlJztcbiAgICB9LCAzMDAwKTtcbiAgfSAvLyBFTkQgUHJlbG9hZGVyXG5cblxuICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci1hY3Rpb25zX19zZWFyY2gnKTtcbiAgdmFyIHNlYXJjaCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuaWNvbi1tYWduaWZpZXItdG9vbCcpO1xuICB2YXIgaW5wdXQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcIlt0eXBlPXRleHRdXCIpO1xuICB2YXIgc2xpZGVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN3aXBlci1jb250YWluZXInKTtcbiAgdmFyIGJsb2dTbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmxvZy1zbGlkZXInKTtcbiAgdmFyIG5ld3NTbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3cy1zbGlkZXInKTtcbiAgdmFyIG1hcENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKTtcbiAgdmFyIGxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmpzLWhlYWRlci1pbmZvX193cml0ZVRvVXMtbGlua1wiKTtcbiAgdmFyIHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcbiAgdmFyIGNsb3NlID0gcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1jbG9zZV9fYnRuXCIpO1xuICB2YXIgbG9naW4gPSBwb3B1cC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9bG9naW5dXCIpO1xuICB2YXIgdGVzdGltb25pYWxzU2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlc3RpbW9uaWFscy1zbGlkZXInKTtcblxuICB2YXIgc2VhcmNoX3RvZ2dsZSA9IGZ1bmN0aW9uIHNlYXJjaF90b2dnbGUoKSB7XG4gICAgc2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgdG9nZ2xlX3NlYXJjaF9jbGFzcygpO1xuICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDI3KSB7XG4gICAgICAgIGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XG4gICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICB2YXIgaXRzX2NvbnRhaW5lciA9IHRhcmdldCA9PSBjb250YWluZXIgfHwgY29udGFpbmVyLmNvbnRhaW5zKHRhcmdldCk7XG4gICAgICB2YXIgc2VhcmNoX2lzX2FjdGl2ZSA9IGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpO1xuXG4gICAgICBpZiAoIWl0c19jb250YWluZXIgJiYgc2VhcmNoX2lzX2FjdGl2ZSkge1xuICAgICAgICB0b2dnbGVfc2VhcmNoX2NsYXNzKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgdG9nZ2xlX3NlYXJjaF9jbGFzcyA9IGZ1bmN0aW9uIHRvZ2dsZV9zZWFyY2hfY2xhc3MoKSB7XG4gICAgICBjb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgbW9kYWwgPSBmdW5jdGlvbiBtb2RhbCgpIHtcbiAgICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1vdmVybGF5Jyk7XG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcG9wdXAuY2xhc3NMaXN0LnRvZ2dsZShcIm1vZGFsLXNob3dcIik7XG4gICAgICBvdmVybGF5LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKTtcbiAgICAgIGxvZ2luLmZvY3VzKCk7XG4gICAgfSk7XG4gICAgY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbC1zaG93XCIpO1xuICAgICAgb3ZlcmxheS5jbGFzc0xpc3QudG9nZ2xlKCdzaG93Jyk7XG4gICAgfSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kYWwtb3ZlcmxheScpKSB7XG4gICAgICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbC1zaG93XCIpO1xuICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTsgLy8gaWYgKHNsaWRlckNvbnRhaW5lcikge1xuICAvLyAgICAgbmV3IEdsaWRlKHNsaWRlckNvbnRhaW5lciwge1xuICAvLyAgICAgdHlwZTogJ3NsaWRlcicsXG4gIC8vICAgICBhdXRvcGxheTogODAwMCxcbiAgLy8gICAgIGtleWJvcmQ6IHRydWUsXG4gIC8vICAgICBob3ZlcnBhdXNlOiB0cnVlLFxuICAvLyAgICAgcmV3aW5kOiB0cnVlLFxuICAvLyAgICAgcmV3aW5kRHVyYXRpb246IDEwMDAsXG4gIC8vICAgICBhbmltYXRpb25UaW1pbmdGdW5jOiAnYm91bmNlJ1xuICAvLyB9KS5tb3VudCgpO1xuICAvLyB9XG5cblxuICBpZiAoc2xpZGVyQ29udGFpbmVyKSB7XG4gICAgdmFyIG15U3dpcGVyID0gbmV3IFN3aXBlcignLnN3aXBlci1jb250YWluZXInLCB7XG4gICAgICBsb29wOiB0cnVlLFxuICAgICAgcGFyYWxsYXg6IHRydWUsXG4gICAgICBhdXRvcGxheToge1xuICAgICAgICBkZWxheTogNTAwMFxuICAgICAgfSxcbiAgICAgIHNwZWVkOiAxMDAwLFxuICAgICAgbW91c2V3aGVlbENvbnRyb2w6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChibG9nU2xpZGVyKSB7XG4gICAgdmFyIHN3aXBlciA9IG5ldyBTd2lwZXIoJy5ibG9nLXNsaWRlcicsIHtcbiAgICAgIHNwYWNlQmV0d2VlbjogMzAsXG4gICAgICBlZmZlY3Q6ICdmYWRlJyxcbiAgICAgIGxvb3A6IHRydWUsXG4gICAgICBncmFiQ3Vyc29yOiB0cnVlLFxuICAgICAgYXV0b3BsYXk6IHtcbiAgICAgICAgZGVsYXk6IDcwMDBcbiAgICAgIH0sXG4gICAgICAvLyBhdXRvSGVpZ2h0OiB0cnVlLFxuICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogJy5ibG9nLXNsaWRlcl9fcGFnaW5hdGlvbicsXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKG1hcENvbnRhaW5lcikge1xuICAgIHZhciBpbml0ID0gZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIHZhciBteU1hcCA9IG5ldyB5bWFwcy5NYXAoXCJtYXBcIiwge1xuICAgICAgICBjZW50ZXI6IFs0Ny41Mzk2LCA0Mi4wMTUxXSxcbiAgICAgICAgY29udHJvbHM6IFsndHlwZVNlbGVjdG9yJywgJ2Z1bGxzY3JlZW5Db250cm9sJywgJ2dlb2xvY2F0aW9uQ29udHJvbCcsICdydWxlckNvbnRyb2wnLCAncm91dGVCdXR0b25Db250cm9sJ10sXG4gICAgICAgIHpvb206IDE2XG4gICAgICB9KTtcbiAgICAgIHZhciBjb250cm9sID0gbXlNYXAuY29udHJvbHMuZ2V0KCdyb3V0ZUJ1dHRvbkNvbnRyb2wnKTtcbiAgICAgIGNvbnRyb2wucm91dGVQYW5lbC5zdGF0ZS5zZXQoJ2Zyb20nLCAn0KDQvtC80LDQvdC+0LLRgdC60LDRjyDRgdC+0Y7Qt9C90YvQuSA5N9CwJyk7XG4gICAgICB2YXIgbXlQbGFjZW1hcmsgPSBuZXcgeW1hcHMuUGxhY2VtYXJrKFs0Ny41Mzk4LCA0Mi4wMTUzXSwge1xuICAgICAgICBoaW50Q29udGVudDogJ9Cj0LsuINCh0L7RjtC30L3QsNGPIDk30LAnLFxuICAgICAgICBiYWxsb29uQ29udGVudDogJ9Cf0L7Qu9C40LrQu9C40L3QuNC60LAnXG4gICAgICB9LCB7XG4gICAgICAgIHByZXNldDogJ2lzbGFuZHMjYmx1ZU1lZGljYWxJY29uJ1xuICAgICAgfSk7XG4gICAgICBteU1hcC5nZW9PYmplY3RzLmFkZChteVBsYWNlbWFyayk7XG4gICAgfTtcblxuICAgIHltYXBzLnJlYWR5KGluaXQpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkVGltZUZvb3RlcigpIHtcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgICBtb250aDogJ2xvbmcnLFxuICAgICAgZGF5OiAnbnVtZXJpYydcbiAgICB9O1xuICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtZm9vdGVyLWluZm9fX2RhdGUnKTtcbiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gZGF0ZS50b0xvY2FsZVN0cmluZyhcInJ1XCIsIG9wdGlvbnMpO1xuICB9IC8vIEhhbWJ1cmdlclxuXG5cbiAgdmFyIHdyYXBwZXJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndyYXBwZXItbWVudScpO1xuICB2YXIgc2lkZW5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWRlbmF2Jyk7XG4gIHZhciBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGVuYXYtb3ZlcmxheScpO1xuICBpZiAod3JhcHBlck1lbnUpIHdyYXBwZXJNZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIHdyYXBwZXJNZW51LmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcbiAgICBzaWRlbmF2LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKTtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKTtcbiAgfSk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaWRlbmF2LW92ZXJsYXknKSkge1xuICAgICAgd3JhcHBlck1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xuICAgICAgc2lkZW5hdi5jbGFzc0xpc3QudG9nZ2xlKCdzaG93Jyk7XG4gICAgICBvdmVybGF5LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKTtcbiAgICB9XG4gIH0pOyAvLyBhY2NvcmRpb25cblxuICB2YXIgYWNjID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImFjYy1oZWFkZXJcIik7XG4gIHZhciBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBhY2MubGVuZ3RoOyBpKyspIHtcbiAgICBhY2NbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAvKiBUb2dnbGUgYmV0d2VlbiBhZGRpbmcgYW5kIHJlbW92aW5nIHRoZSBcImFjdGl2ZVwiIGNsYXNzLFxyXG4gICAgICB0byBoaWdobGlnaHQgdGhlIGJ1dHRvbiB0aGF0IGNvbnRyb2xzIHRoZSBwYW5lbCAqL1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xuICAgICAgLyogVG9nZ2xlIGJldHdlZW4gaGlkaW5nIGFuZCBzaG93aW5nIHRoZSBhY3RpdmUgcGFuZWwgKi9cblxuICAgICAgdmFyIHBhbmVsID0gdGhpcy5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICBwYW5lbC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldFRpbWVvdXQoYWRkVGltZUZvb3RlciwgMTAwKTtcbiAgc2VhcmNoX3RvZ2dsZSgpO1xuICBtb2RhbCgpOyAvLyBzd2lwZXIgc2xpZGVydGVzdFxuXG4gIGlmIChuZXdzU2xpZGVyKSB7XG4gICAgdmFyIHN3aXBlciA9IG5ldyBTd2lwZXIoJy5uZXdzLXNsaWRlcicsIHtcbiAgICAgIGVmZmVjdDogJ2NvdmVyZmxvdycsXG4gICAgICBncmFiQ3Vyc29yOiB0cnVlLFxuICAgICAgbG9vcDogZmFsc2UsXG4gICAgICBjZW50ZXJlZFNsaWRlczogZmFsc2UsXG4gICAgICBrZXlib2FyZDogdHJ1ZSxcbiAgICAgIHNwYWNlQmV0d2VlbjogMTAsXG4gICAgICBzbGlkZXNQZXJWaWV3OiAnMycsXG4gICAgICBzcGVlZDogMzAwLFxuICAgICAgY292ZXJmbG93RWZmZWN0OiB7XG4gICAgICAgIHJvdGF0ZTogMCxcbiAgICAgICAgc3RyZXRjaDogMCxcbiAgICAgICAgZGVwdGg6IDAsXG4gICAgICAgIG1vZGlmaWVyOiAxLFxuICAgICAgICBzbGlkZVNoYWRvd3M6IGZhbHNlXG4gICAgICB9LFxuICAgICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgMTAyNDoge1xuICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDJcbiAgICAgICAgfSxcbiAgICAgICAgODAwOiB7XG4gICAgICAgICAgc2xpZGVzUGVyVmlldzogMVxuICAgICAgICB9LFxuICAgICAgICA0ODA6IHtcbiAgICAgICAgICBzcGFjZUJldHdlZW46IDAsXG4gICAgICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNpbXVsYXRlVG91Y2g6IHRydWUsXG4gICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgIG5leHRFbDogJy5uZXdzLXNsaWRlci1uZXh0JyxcbiAgICAgICAgcHJldkVsOiAnLm5ld3Mtc2xpZGVyLXByZXYnXG4gICAgICB9LFxuICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogJy5uZXdzLXNsaWRlcl9fcGFnaW5hdGlvbicsXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKHRlc3RpbW9uaWFsc1NsaWRlcikge1xuICAgIHZhciBzd2lwZXIgPSBuZXcgU3dpcGVyKHRlc3RpbW9uaWFsc1NsaWRlciwge1xuICAgICAgYXV0b0hlaWdodDogdHJ1ZSxcbiAgICAgIGxvb3A6IHRydWUsXG4gICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLFxuICAgICAgICBwcmV2RWw6ICcuc3dpcGVyLWJ1dHRvbi1wcmV2J1xuICAgICAgfVxuICAgIH0pO1xuICB9IC8vIHBlb3BsZUNhcmRcblxuXG4gIGZ1bmN0aW9uIHBlb3BsZUNhcmQoKSB7XG4gICAgdmFyIHBlb3BsZUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWF0ZXJpYWwtY2FyZCA+IC5tYy1idG4tYWN0aW9uJyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgcGVvcGxlQ2FyZC5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHBlb3BsZUNhcmRbX2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2FyZCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgICAgICAgdmFyIGljb24gPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ2knKTtcbiAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdmYS1zcGluLWZhc3QnKTtcblxuICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ21jLWFjdGl2ZScpKSB7XG4gICAgICAgICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdtYy1hY3RpdmUnKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZSgnZmEtYXJyb3ctbGVmdCcpO1xuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdmYS1zcGluLWZhc3QnKTtcbiAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnZmEtYmFycycpO1xuICAgICAgICAgIH0sIDgwMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdtYy1hY3RpdmUnKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZSgnZmEtYmFycycpO1xuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdmYS1zcGluLWZhc3QnKTtcbiAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnZmEtYXJyb3ctbGVmdCcpO1xuICAgICAgICAgIH0sIDgwMCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIDtcbiAgcGVvcGxlQ2FyZCgpO1xuICB2YXIgZ2FsbGVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5Jyk7XG5cbiAgaWYgKGdhbGxlcnkpIHtcbiAgICBiYWd1ZXR0ZUJveC5ydW4oJy5nYWxsZXJ5LXdyYXAnLCB7XG4gICAgICBhc3luYzogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgdmFyIGZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpO1xuXG4gIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKF9pMikge1xuICAgIGZvcm1zW19pMl0ub25zdWJtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGZvcm1zW19pMl0uY2xhc3NMaXN0LmFkZCgnc2lnbmVkJyk7XG4gICAgfTtcbiAgfTtcblxuICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBmb3Jtcy5sZW5ndGg7IF9pMisrKSB7XG4gICAgX2xvb3AoX2kyKTtcbiAgfVxufSk7Il19
