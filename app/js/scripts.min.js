"use strict";

document.addEventListener("DOMContentLoaded", function () {
  var container = document.querySelector('.header-actions__search');
  var search = container.querySelector('.icon-magnifier-tool');
  var input = container.querySelector("[type=text]");
  var sliderContainer = document.querySelector('.main-slider');
  var mapContainer = document.getElementById('map');
  var link = document.querySelector(".js-header-info__writeToUs-link");
  var popup = document.querySelector(".modal");
  var close = popup.querySelector(".modal-close__btn");
  var login = popup.querySelector("[name=login]");

  var search_toggle = function search_toggle() {
    search.addEventListener('click', function () {
      toggle_search_class();
      input.focus();
    });
    document.addEventListener("keydown", function (event) {
      if (event.keyCode == 27) {
        if (container.classList.contains("active")) {
          container.classList.remove("active");
        }
      }
    });
    document.addEventListener('click', function (e) {
      var target = e.target;
      var its_container = target == container || container.contains(target);
      var search_is_active = container.classList.contains('active');

      if (!its_container && search_is_active) {
        toggle_search_class();
      }
    });

    var toggle_search_class = function toggle_search_class() {
      container.classList.toggle('active');
    };
  };

  var modal = function modal() {
    link.addEventListener("click", function (event) {
      event.preventDefault();
      popup.classList.toggle("modal-show");
      login.focus();
    });
    close.addEventListener("click", function (event) {
      event.preventDefault();
      popup.classList.remove("modal-show");
    });
  };

  if (sliderContainer) {
    new Glide(sliderContainer, {
      type: 'slider',
      autoplay: 8000,
      keybord: true,
      hoverpause: true,
      rewind: true,
      rewindDuration: 1000,
      animationTimingFunc: 'cubic-bezier(0.665, 0.340, 0.740, 1.000)'
    }).mount();
  }

  if (mapContainer) {
    var init = function init() {
      var myMap = new ymaps.Map("map", {
        center: [47.5396, 42.0151],
        controls: ['typeSelector', 'fullscreenControl', 'geolocationControl', 'rulerControl', 'routeButtonControl'],
        zoom: 16
      });
      var control = myMap.controls.get('routeButtonControl');
      control.routePanel.state.set('from', 'Романовская союзный 97а');
      var myPlacemark = new ymaps.Placemark([47.5398, 42.0153], {
        hintContent: 'Ул. Союзная 97а',
        balloonContent: 'Поликлиника'
      }, {
        preset: 'islands#blueMedicalIcon'
      });
      myMap.geoObjects.add(myPlacemark);
    };

    ymaps.ready(init);
  }

  function addTimeFooter() {
    var date = new Date();
    var options = {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    };
    var container = document.querySelector('.js-footer-info__date');
    container.innerHTML = date.toLocaleString("ru", options);
  }

  setTimeout(addTimeFooter, 100);
  search_toggle();
  modal();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLWFjdGlvbnNfX3NlYXJjaCcpO1xuICB2YXIgc2VhcmNoID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5pY29uLW1hZ25pZmllci10b29sJyk7XG4gIHZhciBpbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiW3R5cGU9dGV4dF1cIik7XG4gIHZhciBzbGlkZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1zbGlkZXInKTtcbiAgdmFyIG1hcENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKTtcbiAgdmFyIGxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmpzLWhlYWRlci1pbmZvX193cml0ZVRvVXMtbGlua1wiKTtcbiAgdmFyIHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcbiAgdmFyIGNsb3NlID0gcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1jbG9zZV9fYnRuXCIpO1xuICB2YXIgbG9naW4gPSBwb3B1cC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9bG9naW5dXCIpO1xuXG4gIHZhciBzZWFyY2hfdG9nZ2xlID0gZnVuY3Rpb24gc2VhcmNoX3RvZ2dsZSgpIHtcbiAgICBzZWFyY2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0b2dnbGVfc2VhcmNoX2NsYXNzKCk7XG4gICAgICBpbnB1dC5mb2N1cygpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMjcpIHtcbiAgICAgICAgaWYgKGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcbiAgICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgIHZhciBpdHNfY29udGFpbmVyID0gdGFyZ2V0ID09IGNvbnRhaW5lciB8fCBjb250YWluZXIuY29udGFpbnModGFyZ2V0KTtcbiAgICAgIHZhciBzZWFyY2hfaXNfYWN0aXZlID0gY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJyk7XG5cbiAgICAgIGlmICghaXRzX2NvbnRhaW5lciAmJiBzZWFyY2hfaXNfYWN0aXZlKSB7XG4gICAgICAgIHRvZ2dsZV9zZWFyY2hfY2xhc3MoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciB0b2dnbGVfc2VhcmNoX2NsYXNzID0gZnVuY3Rpb24gdG9nZ2xlX3NlYXJjaF9jbGFzcygpIHtcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBtb2RhbCA9IGZ1bmN0aW9uIG1vZGFsKCkge1xuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHBvcHVwLmNsYXNzTGlzdC50b2dnbGUoXCJtb2RhbC1zaG93XCIpO1xuICAgICAgbG9naW4uZm9jdXMoKTtcbiAgICB9KTtcbiAgICBjbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsLXNob3dcIik7XG4gICAgfSk7XG4gIH07XG5cbiAgaWYgKHNsaWRlckNvbnRhaW5lcikge1xuICAgIG5ldyBHbGlkZShzbGlkZXJDb250YWluZXIsIHtcbiAgICAgIHR5cGU6ICdzbGlkZXInLFxuICAgICAgYXV0b3BsYXk6IDgwMDAsXG4gICAgICBrZXlib3JkOiB0cnVlLFxuICAgICAgaG92ZXJwYXVzZTogdHJ1ZSxcbiAgICAgIHJld2luZDogdHJ1ZSxcbiAgICAgIHJld2luZER1cmF0aW9uOiAxMDAwLFxuICAgICAgYW5pbWF0aW9uVGltaW5nRnVuYzogJ2N1YmljLWJlemllcigwLjY2NSwgMC4zNDAsIDAuNzQwLCAxLjAwMCknXG4gICAgfSkubW91bnQoKTtcbiAgfVxuXG4gIGlmIChtYXBDb250YWluZXIpIHtcbiAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICB2YXIgbXlNYXAgPSBuZXcgeW1hcHMuTWFwKFwibWFwXCIsIHtcbiAgICAgICAgY2VudGVyOiBbNDcuNTM5NiwgNDIuMDE1MV0sXG4gICAgICAgIGNvbnRyb2xzOiBbJ3R5cGVTZWxlY3RvcicsICdmdWxsc2NyZWVuQ29udHJvbCcsICdnZW9sb2NhdGlvbkNvbnRyb2wnLCAncnVsZXJDb250cm9sJywgJ3JvdXRlQnV0dG9uQ29udHJvbCddLFxuICAgICAgICB6b29tOiAxNlxuICAgICAgfSk7XG4gICAgICB2YXIgY29udHJvbCA9IG15TWFwLmNvbnRyb2xzLmdldCgncm91dGVCdXR0b25Db250cm9sJyk7XG4gICAgICBjb250cm9sLnJvdXRlUGFuZWwuc3RhdGUuc2V0KCdmcm9tJywgJ9Cg0L7QvNCw0L3QvtCy0YHQutCw0Y8g0YHQvtGO0LfQvdGL0LkgOTfQsCcpO1xuICAgICAgdmFyIG15UGxhY2VtYXJrID0gbmV3IHltYXBzLlBsYWNlbWFyayhbNDcuNTM5OCwgNDIuMDE1M10sIHtcbiAgICAgICAgaGludENvbnRlbnQ6ICfQo9C7LiDQodC+0Y7Qt9C90LDRjyA5N9CwJyxcbiAgICAgICAgYmFsbG9vbkNvbnRlbnQ6ICfQn9C+0LvQuNC60LvQuNC90LjQutCwJ1xuICAgICAgfSwge1xuICAgICAgICBwcmVzZXQ6ICdpc2xhbmRzI2JsdWVNZWRpY2FsSWNvbidcbiAgICAgIH0pO1xuICAgICAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQobXlQbGFjZW1hcmspO1xuICAgIH07XG5cbiAgICB5bWFwcy5yZWFkeShpbml0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFRpbWVGb290ZXIoKSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgeWVhcjogJ251bWVyaWMnLFxuICAgICAgbW9udGg6ICdsb25nJyxcbiAgICAgIGRheTogJ251bWVyaWMnXG4gICAgfTtcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWZvb3Rlci1pbmZvX19kYXRlJyk7XG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IGRhdGUudG9Mb2NhbGVTdHJpbmcoXCJydVwiLCBvcHRpb25zKTtcbiAgfVxuXG4gIHNldFRpbWVvdXQoYWRkVGltZUZvb3RlciwgMTAwKTtcbiAgc2VhcmNoX3RvZ2dsZSgpO1xuICBtb2RhbCgpO1xufSk7Il19
