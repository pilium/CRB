"use strict";document.addEventListener("DOMContentLoaded",function(){function e(){var e=new Date,t={year:"numeric",month:"long",day:"numeric"};document.querySelector(".js-footer-info__date").innerHTML=e.toLocaleString("ru",t)}var t=document.getElementById("preloader");t&&setTimeout(function(){t.classList.add("active"),document.body.style.overflow="visible"},3e3);var o=document.querySelector(".header-actions__search"),s=o.querySelector(".icon-magnifier-tool"),n=o.querySelector("[type=text]"),a=document.querySelector(".swiper-container"),i=document.querySelector(".blog-slider"),l=document.querySelector(".news-slider"),r=document.getElementById("map"),c=document.querySelector(".js-header-info__writeToUs-link"),d=document.querySelector(".modal"),u=d.querySelector(".modal-close__btn"),m=d.querySelector("[name=login]"),v=document.querySelector(".testimonials-slider");if(a){new Swiper(".swiper-container",{loop:!0,parallax:!0,autoplay:{delay:5e3},speed:1e3,mousewheelControl:!0})}if(i){new Swiper(".blog-slider",{spaceBetween:30,effect:"fade",loop:!0,grabCursor:!0,autoplay:{delay:7e3},pagination:{el:".blog-slider__pagination",clickable:!0}})}if(r){var f=function(){var e=new ymaps.Map("map",{center:[47.5396,42.0151],controls:["typeSelector","fullscreenControl","geolocationControl","rulerControl","routeButtonControl"],zoom:16});e.controls.get("routeButtonControl").routePanel.state.set("from","Романовская союзный 97а");var t=new ymaps.Placemark([47.5398,42.0153],{hintContent:"Ул. Союзная 97а",balloonContent:"Поликлиника"},{preset:"islands#blueMedicalIcon"});e.geoObjects.add(t)};ymaps.ready(f)}var g=document.querySelector(".wrapper-menu"),p=document.querySelector(".sidenav"),w=document.querySelector(".sidenav-overlay");g&&g.addEventListener("click",function(){g.classList.toggle("open"),p.classList.toggle("show"),w.classList.toggle("show")}),document.addEventListener("click",function(e){e.target.classList.contains("sidenav-overlay")&&(g.classList.toggle("open"),p.classList.toggle("show"),w.classList.toggle("show"))});var y,L=document.getElementsByClassName("acc-header");for(y=0;y<L.length;y++)L[y].addEventListener("click",function(e){e.preventDefault(),this.classList.toggle("active"),this.nextElementSibling.classList.toggle("active")});if(setTimeout(e,100),function(){s.addEventListener("click",function(){e(),n.focus()}),document.addEventListener("keydown",function(e){27==e.keyCode&&o.classList.contains("active")&&o.classList.remove("active")}),document.addEventListener("click",function(t){var s=t.target,n=s==o||o.contains(s),a=o.classList.contains("active");!n&&a&&e()});var e=function(){o.classList.toggle("active")}}(),function(){var e=document.querySelector(".modal-overlay");c.addEventListener("click",function(t){t.preventDefault(),d.classList.toggle("modal-show"),e.classList.toggle("show"),m.focus()}),u.addEventListener("click",function(t){t.preventDefault(),d.classList.remove("modal-show"),e.classList.toggle("show")}),document.addEventListener("click",function(t){t.target.classList.contains("modal-overlay")&&(d.classList.remove("modal-show"),e.classList.toggle("show"))})}(),l){new Swiper(".news-slider",{effect:"coverflow",grabCursor:!0,loop:!1,centeredSlides:!1,keyboard:!0,spaceBetween:10,slidesPerView:"3",speed:300,coverflowEffect:{rotate:0,stretch:0,depth:0,modifier:1,slideShadows:!1},breakpoints:{1024:{slidesPerView:2},800:{slidesPerView:1},480:{spaceBetween:0,centeredSlides:!0}},simulateTouch:!0,navigation:{nextEl:".news-slider-next",prevEl:".news-slider-prev"},pagination:{el:".news-slider__pagination",clickable:!0}})}if(v){new Swiper(v,{autoHeight:!0,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}!function(){for(var e=document.querySelectorAll(".material-card > .mc-btn-action"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){var e=this.parentNode,t=this.querySelector("i");t.classList.add("fa-spin-fast"),e.classList.contains("mc-active")?(e.classList.remove("mc-active"),setTimeout(function(){t.classList.remove("fa-arrow-left"),t.classList.remove("fa-spin-fast"),t.classList.add("fa-bars")},800)):(e.classList.add("mc-active"),setTimeout(function(){t.classList.remove("fa-bars"),t.classList.remove("fa-spin-fast"),t.classList.add("fa-arrow-left")},800))})}(),document.querySelector(".gallery")&&baguetteBox.run(".gallery-wrap",{async:!0})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhZGRUaW1lRm9vdGVyIiwiZGF0ZSIsIkRhdGUiLCJvcHRpb25zIiwieWVhciIsIm1vbnRoIiwiZGF5IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsInRvTG9jYWxlU3RyaW5nIiwicHJlbG9hZGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJzZXRUaW1lb3V0IiwiY2xhc3NMaXN0IiwiYWRkIiwiYm9keSIsInN0eWxlIiwib3ZlcmZsb3ciLCJjb250YWluZXIiLCJzZWFyY2giLCJpbnB1dCIsInNsaWRlckNvbnRhaW5lciIsImJsb2dTbGlkZXIiLCJuZXdzU2xpZGVyIiwibWFwQ29udGFpbmVyIiwibGluayIsInBvcHVwIiwiY2xvc2UiLCJsb2dpbiIsInRlc3RpbW9uaWFsc1NsaWRlciIsIlN3aXBlciIsImxvb3AiLCJwYXJhbGxheCIsImF1dG9wbGF5IiwiZGVsYXkiLCJzcGVlZCIsIm1vdXNld2hlZWxDb250cm9sIiwic3BhY2VCZXR3ZWVuIiwiZWZmZWN0IiwiZ3JhYkN1cnNvciIsInBhZ2luYXRpb24iLCJlbCIsImNsaWNrYWJsZSIsImluaXQiLCJteU1hcCIsInltYXBzIiwiTWFwIiwiY2VudGVyIiwiY29udHJvbHMiLCJ6b29tIiwiZ2V0Iiwicm91dGVQYW5lbCIsInN0YXRlIiwic2V0IiwibXlQbGFjZW1hcmsiLCJQbGFjZW1hcmsiLCJoaW50Q29udGVudCIsImJhbGxvb25Db250ZW50IiwicHJlc2V0IiwiZ2VvT2JqZWN0cyIsInJlYWR5Iiwid3JhcHBlck1lbnUiLCJzaWRlbmF2Iiwib3ZlcmxheSIsInRvZ2dsZSIsImUiLCJ0YXJnZXQiLCJjb250YWlucyIsImkiLCJhY2MiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibGVuZ3RoIiwicHJldmVudERlZmF1bHQiLCJ0aGlzIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwidG9nZ2xlX3NlYXJjaF9jbGFzcyIsImZvY3VzIiwiZXZlbnQiLCJrZXlDb2RlIiwicmVtb3ZlIiwiaXRzX2NvbnRhaW5lciIsInNlYXJjaF9pc19hY3RpdmUiLCJjZW50ZXJlZFNsaWRlcyIsImtleWJvYXJkIiwic2xpZGVzUGVyVmlldyIsImNvdmVyZmxvd0VmZmVjdCIsInJvdGF0ZSIsInN0cmV0Y2giLCJkZXB0aCIsIm1vZGlmaWVyIiwic2xpZGVTaGFkb3dzIiwiYnJlYWtwb2ludHMiLCIxMDI0IiwiODAwIiwiNDgwIiwic2ltdWxhdGVUb3VjaCIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJhdXRvSGVpZ2h0IiwicGVvcGxlQ2FyZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfaSIsImNhcmQiLCJwYXJlbnROb2RlIiwiaWNvbiIsImJhZ3VldHRlQm94IiwicnVuIiwiYXN5bmMiXSwibWFwcGluZ3MiOiJBQUFBLFlBRUFBLFVBQUFDLGlCQUFBLG1CQUFBLFdBc0lBLFFBQUFDLEtBQ0EsR0FBQUMsR0FBQSxHQUFBQyxNQUNBQyxHQUNBQyxLQUFBLFVBQ0FDLE1BQUEsT0FDQUMsSUFBQSxVQUVBUixVQUFBUyxjQUFBLHlCQUNBQyxVQUFBUCxFQUFBUSxlQUFBLEtBQUFOLEdBNUlBLEdBQUFPLEdBQUFaLFNBQUFhLGVBQUEsWUFFQUQsSUFDQUUsV0FBQSxXQUNBRixFQUFBRyxVQUFBQyxJQUFBLFVBQ0FoQixTQUFBaUIsS0FBQUMsTUFBQUMsU0FBQSxXQUNBLElBSUEsSUFBQUMsR0FBQXBCLFNBQUFTLGNBQUEsMkJBQ0FZLEVBQUFELEVBQUFYLGNBQUEsd0JBQ0FhLEVBQUFGLEVBQUFYLGNBQUEsZUFDQWMsRUFBQXZCLFNBQUFTLGNBQUEscUJBQ0FlLEVBQUF4QixTQUFBUyxjQUFBLGdCQUNBZ0IsRUFBQXpCLFNBQUFTLGNBQUEsZ0JBQ0FpQixFQUFBMUIsU0FBQWEsZUFBQSxPQUNBYyxFQUFBM0IsU0FBQVMsY0FBQSxtQ0FDQW1CLEVBQUE1QixTQUFBUyxjQUFBLFVBQ0FvQixFQUFBRCxFQUFBbkIsY0FBQSxxQkFDQXFC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QUEiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xuICAvLyBwcmVsb2FkZXJcbiAgdmFyIHByZWxvYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmVsb2FkZXInKTtcblxuICBpZiAocHJlbG9hZGVyKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBwcmVsb2FkZXIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ3Zpc2libGUnO1xuICAgIH0sIDMwMDApO1xuICB9IC8vIEVORCBQcmVsb2FkZXJcblxuXG4gIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLWFjdGlvbnNfX3NlYXJjaCcpO1xuICB2YXIgc2VhcmNoID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5pY29uLW1hZ25pZmllci10b29sJyk7XG4gIHZhciBpbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiW3R5cGU9dGV4dF1cIik7XG4gIHZhciBzbGlkZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLWNvbnRhaW5lcicpO1xuICB2YXIgYmxvZ1NsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ibG9nLXNsaWRlcicpO1xuICB2YXIgbmV3c1NsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdzLXNsaWRlcicpO1xuICB2YXIgbWFwQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpO1xuICB2YXIgbGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanMtaGVhZGVyLWluZm9fX3dyaXRlVG9Vcy1saW5rXCIpO1xuICB2YXIgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpO1xuICB2YXIgY2xvc2UgPSBwb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWNsb3NlX19idG5cIik7XG4gIHZhciBsb2dpbiA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT1sb2dpbl1cIik7XG4gIHZhciB0ZXN0aW1vbmlhbHNTbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVzdGltb25pYWxzLXNsaWRlcicpO1xuXG4gIHZhciBzZWFyY2hfdG9nZ2xlID0gZnVuY3Rpb24gc2VhcmNoX3RvZ2dsZSgpIHtcbiAgICBzZWFyY2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0b2dnbGVfc2VhcmNoX2NsYXNzKCk7XG4gICAgICBpbnB1dC5mb2N1cygpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMjcpIHtcbiAgICAgICAgaWYgKGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcbiAgICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgIHZhciBpdHNfY29udGFpbmVyID0gdGFyZ2V0ID09IGNvbnRhaW5lciB8fCBjb250YWluZXIuY29udGFpbnModGFyZ2V0KTtcbiAgICAgIHZhciBzZWFyY2hfaXNfYWN0aXZlID0gY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJyk7XG5cbiAgICAgIGlmICghaXRzX2NvbnRhaW5lciAmJiBzZWFyY2hfaXNfYWN0aXZlKSB7XG4gICAgICAgIHRvZ2dsZV9zZWFyY2hfY2xhc3MoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciB0b2dnbGVfc2VhcmNoX2NsYXNzID0gZnVuY3Rpb24gdG9nZ2xlX3NlYXJjaF9jbGFzcygpIHtcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBtb2RhbCA9IGZ1bmN0aW9uIG1vZGFsKCkge1xuICAgIHZhciBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLW92ZXJsYXknKTtcbiAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBwb3B1cC5jbGFzc0xpc3QudG9nZ2xlKFwibW9kYWwtc2hvd1wiKTtcbiAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xuICAgICAgbG9naW4uZm9jdXMoKTtcbiAgICB9KTtcbiAgICBjbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsLXNob3dcIik7XG4gICAgICBvdmVybGF5LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RhbC1vdmVybGF5JykpIHtcbiAgICAgICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsLXNob3dcIik7XG4gICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9OyAvLyBpZiAoc2xpZGVyQ29udGFpbmVyKSB7XG4gIC8vICAgICBuZXcgR2xpZGUoc2xpZGVyQ29udGFpbmVyLCB7XG4gIC8vICAgICB0eXBlOiAnc2xpZGVyJyxcbiAgLy8gICAgIGF1dG9wbGF5OiA4MDAwLFxuICAvLyAgICAga2V5Ym9yZDogdHJ1ZSxcbiAgLy8gICAgIGhvdmVycGF1c2U6IHRydWUsXG4gIC8vICAgICByZXdpbmQ6IHRydWUsXG4gIC8vICAgICByZXdpbmREdXJhdGlvbjogMTAwMCxcbiAgLy8gICAgIGFuaW1hdGlvblRpbWluZ0Z1bmM6ICdib3VuY2UnXG4gIC8vIH0pLm1vdW50KCk7XG4gIC8vIH1cblxuXG4gIGlmIChzbGlkZXJDb250YWluZXIpIHtcbiAgICB2YXIgbXlTd2lwZXIgPSBuZXcgU3dpcGVyKCcuc3dpcGVyLWNvbnRhaW5lcicsIHtcbiAgICAgIGxvb3A6IHRydWUsXG4gICAgICBwYXJhbGxheDogdHJ1ZSxcbiAgICAgIGF1dG9wbGF5OiB7XG4gICAgICAgIGRlbGF5OiA1MDAwXG4gICAgICB9LFxuICAgICAgc3BlZWQ6IDEwMDAsXG4gICAgICBtb3VzZXdoZWVsQ29udHJvbDogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKGJsb2dTbGlkZXIpIHtcbiAgICB2YXIgc3dpcGVyID0gbmV3IFN3aXBlcignLmJsb2ctc2xpZGVyJywge1xuICAgICAgc3BhY2VCZXR3ZWVuOiAzMCxcbiAgICAgIGVmZmVjdDogJ2ZhZGUnLFxuICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgIGdyYWJDdXJzb3I6IHRydWUsXG4gICAgICBhdXRvcGxheToge1xuICAgICAgICBkZWxheTogNzAwMFxuICAgICAgfSxcbiAgICAgIC8vIGF1dG9IZWlnaHQ6IHRydWUsXG4gICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIGVsOiAnLmJsb2ctc2xpZGVyX19wYWdpbmF0aW9uJyxcbiAgICAgICAgY2xpY2thYmxlOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAobWFwQ29udGFpbmVyKSB7XG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgdmFyIG15TWFwID0gbmV3IHltYXBzLk1hcChcIm1hcFwiLCB7XG4gICAgICAgIGNlbnRlcjogWzQ3LjUzOTYsIDQyLjAxNTFdLFxuICAgICAgICBjb250cm9sczogWyd0eXBlU2VsZWN0b3InLCAnZnVsbHNjcmVlbkNvbnRyb2wnLCAnZ2VvbG9jYXRpb25Db250cm9sJywgJ3J1bGVyQ29udHJvbCcsICdyb3V0ZUJ1dHRvbkNvbnRyb2wnXSxcbiAgICAgICAgem9vbTogMTZcbiAgICAgIH0pO1xuICAgICAgdmFyIGNvbnRyb2wgPSBteU1hcC5jb250cm9scy5nZXQoJ3JvdXRlQnV0dG9uQ29udHJvbCcpO1xuICAgICAgY29udHJvbC5yb3V0ZVBhbmVsLnN0YXRlLnNldCgnZnJvbScsICfQoNC+0LzQsNC90L7QstGB0LrQsNGPINGB0L7RjtC30L3Ri9C5IDk30LAnKTtcbiAgICAgIHZhciBteVBsYWNlbWFyayA9IG5ldyB5bWFwcy5QbGFjZW1hcmsoWzQ3LjUzOTgsIDQyLjAxNTNdLCB7XG4gICAgICAgIGhpbnRDb250ZW50OiAn0KPQuy4g0KHQvtGO0LfQvdCw0Y8gOTfQsCcsXG4gICAgICAgIGJhbGxvb25Db250ZW50OiAn0J/QvtC70LjQutC70LjQvdC40LrQsCdcbiAgICAgIH0sIHtcbiAgICAgICAgcHJlc2V0OiAnaXNsYW5kcyNibHVlTWVkaWNhbEljb24nXG4gICAgICB9KTtcbiAgICAgIG15TWFwLmdlb09iamVjdHMuYWRkKG15UGxhY2VtYXJrKTtcbiAgICB9O1xuXG4gICAgeW1hcHMucmVhZHkoaW5pdCk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRUaW1lRm9vdGVyKCkge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIHllYXI6ICdudW1lcmljJyxcbiAgICAgIG1vbnRoOiAnbG9uZycsXG4gICAgICBkYXk6ICdudW1lcmljJ1xuICAgIH07XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1mb290ZXItaW5mb19fZGF0ZScpO1xuICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBkYXRlLnRvTG9jYWxlU3RyaW5nKFwicnVcIiwgb3B0aW9ucyk7XG4gIH0gLy8gSGFtYnVyZ2VyXG5cblxuICB2YXIgd3JhcHBlck1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud3JhcHBlci1tZW51Jyk7XG4gIHZhciBzaWRlbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGVuYXYnKTtcbiAgdmFyIG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZW5hdi1vdmVybGF5Jyk7XG4gIGlmICh3cmFwcGVyTWVudSkgd3JhcHBlck1lbnUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgd3JhcHBlck1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xuICAgIHNpZGVuYXYuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xuICB9KTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NpZGVuYXYtb3ZlcmxheScpKSB7XG4gICAgICB3cmFwcGVyTWVudS5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XG4gICAgICBzaWRlbmF2LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKTtcbiAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xuICAgIH1cbiAgfSk7IC8vIGFjY29yZGlvblxuXG4gIHZhciBhY2MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYWNjLWhlYWRlclwiKTtcbiAgdmFyIGk7XG5cbiAgZm9yIChpID0gMDsgaSA8IGFjYy5sZW5ndGg7IGkrKykge1xuICAgIGFjY1tpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIC8qIFRvZ2dsZSBiZXR3ZWVuIGFkZGluZyBhbmQgcmVtb3ZpbmcgdGhlIFwiYWN0aXZlXCIgY2xhc3MsXG4gICAgICB0byBoaWdobGlnaHQgdGhlIGJ1dHRvbiB0aGF0IGNvbnRyb2xzIHRoZSBwYW5lbCAqL1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xuICAgICAgLyogVG9nZ2xlIGJldHdlZW4gaGlkaW5nIGFuZCBzaG93aW5nIHRoZSBhY3RpdmUgcGFuZWwgKi9cblxuICAgICAgdmFyIHBhbmVsID0gdGhpcy5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICBwYW5lbC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldFRpbWVvdXQoYWRkVGltZUZvb3RlciwgMTAwKTtcbiAgc2VhcmNoX3RvZ2dsZSgpO1xuICBtb2RhbCgpOyAvLyBzd2lwZXIgc2xpZGVydGVzdFxuXG4gIGlmIChuZXdzU2xpZGVyKSB7XG4gICAgdmFyIHN3aXBlciA9IG5ldyBTd2lwZXIoJy5uZXdzLXNsaWRlcicsIHtcbiAgICAgIGVmZmVjdDogJ2NvdmVyZmxvdycsXG4gICAgICBncmFiQ3Vyc29yOiB0cnVlLFxuICAgICAgbG9vcDogZmFsc2UsXG4gICAgICBjZW50ZXJlZFNsaWRlczogZmFsc2UsXG4gICAgICBrZXlib2FyZDogdHJ1ZSxcbiAgICAgIHNwYWNlQmV0d2VlbjogMTAsXG4gICAgICBzbGlkZXNQZXJWaWV3OiAnMycsXG4gICAgICBzcGVlZDogMzAwLFxuICAgICAgY292ZXJmbG93RWZmZWN0OiB7XG4gICAgICAgIHJvdGF0ZTogMCxcbiAgICAgICAgc3RyZXRjaDogMCxcbiAgICAgICAgZGVwdGg6IDAsXG4gICAgICAgIG1vZGlmaWVyOiAxLFxuICAgICAgICBzbGlkZVNoYWRvd3M6IGZhbHNlXG4gICAgICB9LFxuICAgICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgMTAyNDoge1xuICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDJcbiAgICAgICAgfSxcbiAgICAgICAgODAwOiB7XG4gICAgICAgICAgc2xpZGVzUGVyVmlldzogMVxuICAgICAgICB9LFxuICAgICAgICA0ODA6IHtcbiAgICAgICAgICBzcGFjZUJldHdlZW46IDAsXG4gICAgICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNpbXVsYXRlVG91Y2g6IHRydWUsXG4gICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgIG5leHRFbDogJy5uZXdzLXNsaWRlci1uZXh0JyxcbiAgICAgICAgcHJldkVsOiAnLm5ld3Mtc2xpZGVyLXByZXYnXG4gICAgICB9LFxuICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogJy5uZXdzLXNsaWRlcl9fcGFnaW5hdGlvbicsXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKHRlc3RpbW9uaWFsc1NsaWRlcikge1xuICAgIHZhciBzd2lwZXIgPSBuZXcgU3dpcGVyKHRlc3RpbW9uaWFsc1NsaWRlciwge1xuICAgICAgYXV0b0hlaWdodDogdHJ1ZSxcbiAgICAgIGxvb3A6IHRydWUsXG4gICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLFxuICAgICAgICBwcmV2RWw6ICcuc3dpcGVyLWJ1dHRvbi1wcmV2J1xuICAgICAgfVxuICAgIH0pO1xuICB9IC8vIHBlb3BsZUNhcmRcblxuXG4gIGZ1bmN0aW9uIHBlb3BsZUNhcmQoKSB7XG4gICAgdmFyIHBlb3BsZUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWF0ZXJpYWwtY2FyZCA+IC5tYy1idG4tYWN0aW9uJyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgcGVvcGxlQ2FyZC5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHBlb3BsZUNhcmRbX2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2FyZCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgICAgICAgdmFyIGljb24gPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ2knKTtcbiAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdmYS1zcGluLWZhc3QnKTtcblxuICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ21jLWFjdGl2ZScpKSB7XG4gICAgICAgICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdtYy1hY3RpdmUnKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZSgnZmEtYXJyb3ctbGVmdCcpO1xuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdmYS1zcGluLWZhc3QnKTtcbiAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnZmEtYmFycycpO1xuICAgICAgICAgIH0sIDgwMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdtYy1hY3RpdmUnKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZSgnZmEtYmFycycpO1xuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdmYS1zcGluLWZhc3QnKTtcbiAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnZmEtYXJyb3ctbGVmdCcpO1xuICAgICAgICAgIH0sIDgwMCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIDtcbiAgcGVvcGxlQ2FyZCgpO1xuICB2YXIgZ2FsbGVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5Jyk7XG5cbiAgaWYgKGdhbGxlcnkpIHtcbiAgICBiYWd1ZXR0ZUJveC5ydW4oJy5nYWxsZXJ5LXdyYXAnLCB7XG4gICAgICBhc3luYzogdHJ1ZVxuICAgIH0pO1xuICB9XG59KTsiXX0=
