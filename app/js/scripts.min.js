"use strict";

document.addEventListener("DOMContentLoaded", function () {
  var container = document.querySelector('.header-actions__search');
  var search = container.querySelector('.icon-magnifier-tool');
  var input = container.querySelector("[type=text]");
  var link = document.querySelector(".js-header-info__writeToUs-link");
  var popup = document.querySelector(".modal");
  var close = popup.querySelector(".modal-close__btn");
  var login = popup.querySelector("[name=login]");

  var search_toggle = function search_toggle() {
    search.addEventListener('click', function () {
      toggle_search_class();
      input.focus();
    });
    document.addEventListener("keydown", function (event) {
      if (event.keyCode == 27) {
        if (container.classList.contains("active")) {
          container.classList.remove("active");
        }
      }
    });
    document.addEventListener('click', function (e) {
      var target = e.target;
      var its_container = target == container || container.contains(target);
      var search_is_active = container.classList.contains('active');

      if (!its_container && search_is_active) {
        toggle_search_class();
      }
    });

    var toggle_search_class = function toggle_search_class() {
      container.classList.toggle('active');
    };
  };

  var modal = function modal() {
    link.addEventListener("click", function (event) {
      event.preventDefault();
      popup.classList.toggle("modal-show");
      login.focus();
    });
    close.addEventListener("click", function (event) {
      event.preventDefault();
      popup.classList.remove("modal-show");
    });
  };

  search_toggle();
  modal();
  new Glide('.main-slider', {
    type: 'slider',
    autoplay: 8000,
    keybord: true,
    hoverpause: true,
    rewind: true,
    rewindDuration: 1000,
    animationTimingFunc: 'cubic-bezier(0.665, 0.340, 0.740, 1.000)'
  }).mount();

  function init() {
    var myMap = new ymaps.Map("map", {
      center: [47.5396, 42.0151],
      controls: ['typeSelector', 'fullscreenControl', 'geolocationControl', 'rulerControl', 'routeButtonControl'],
      zoom: 16
    });
    var control = myMap.controls.get('routeButtonControl');
    control.routePanel.state.set('from', 'Романовская союзный 97а');
    var myPlacemark = new ymaps.Placemark([47.5398, 42.0153], {
      hintContent: 'Ул. Союзная 97а',
      balloonContent: 'Поликлиника'
    }, {
      preset: 'islands#blueMedicalIcon'
    });
    myMap.geoObjects.add(myPlacemark);
  }

  ymaps.ready(init);

  function addTimeFooter() {
    var date = new Date();
    var options = {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    };
    var container = document.querySelector('.js-footer-info__date');
    container.innerHTML = date.toLocaleString("ru", options);
  }

  setTimeout(addTimeFooter, 100);
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLWFjdGlvbnNfX3NlYXJjaCcpO1xuICB2YXIgc2VhcmNoID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5pY29uLW1hZ25pZmllci10b29sJyk7XG4gIHZhciBpbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiW3R5cGU9dGV4dF1cIik7XG4gIHZhciBsaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5qcy1oZWFkZXItaW5mb19fd3JpdGVUb1VzLWxpbmtcIik7XG4gIHZhciBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XG4gIHZhciBjbG9zZSA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtY2xvc2VfX2J0blwiKTtcbiAgdmFyIGxvZ2luID0gcG9wdXAucXVlcnlTZWxlY3RvcihcIltuYW1lPWxvZ2luXVwiKTtcblxuICB2YXIgc2VhcmNoX3RvZ2dsZSA9IGZ1bmN0aW9uIHNlYXJjaF90b2dnbGUoKSB7XG4gICAgc2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgdG9nZ2xlX3NlYXJjaF9jbGFzcygpO1xuICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDI3KSB7XG4gICAgICAgIGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XG4gICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICB2YXIgaXRzX2NvbnRhaW5lciA9IHRhcmdldCA9PSBjb250YWluZXIgfHwgY29udGFpbmVyLmNvbnRhaW5zKHRhcmdldCk7XG4gICAgICB2YXIgc2VhcmNoX2lzX2FjdGl2ZSA9IGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpO1xuXG4gICAgICBpZiAoIWl0c19jb250YWluZXIgJiYgc2VhcmNoX2lzX2FjdGl2ZSkge1xuICAgICAgICB0b2dnbGVfc2VhcmNoX2NsYXNzKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgdG9nZ2xlX3NlYXJjaF9jbGFzcyA9IGZ1bmN0aW9uIHRvZ2dsZV9zZWFyY2hfY2xhc3MoKSB7XG4gICAgICBjb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgbW9kYWwgPSBmdW5jdGlvbiBtb2RhbCgpIHtcbiAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBwb3B1cC5jbGFzc0xpc3QudG9nZ2xlKFwibW9kYWwtc2hvd1wiKTtcbiAgICAgIGxvZ2luLmZvY3VzKCk7XG4gICAgfSk7XG4gICAgY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbC1zaG93XCIpO1xuICAgIH0pO1xuICB9O1xuXG4gIHNlYXJjaF90b2dnbGUoKTtcbiAgbW9kYWwoKTtcbiAgbmV3IEdsaWRlKCcubWFpbi1zbGlkZXInLCB7XG4gICAgdHlwZTogJ3NsaWRlcicsXG4gICAgYXV0b3BsYXk6IDgwMDAsXG4gICAga2V5Ym9yZDogdHJ1ZSxcbiAgICBob3ZlcnBhdXNlOiB0cnVlLFxuICAgIHJld2luZDogdHJ1ZSxcbiAgICByZXdpbmREdXJhdGlvbjogMTAwMCxcbiAgICBhbmltYXRpb25UaW1pbmdGdW5jOiAnY3ViaWMtYmV6aWVyKDAuNjY1LCAwLjM0MCwgMC43NDAsIDEuMDAwKSdcbiAgfSkubW91bnQoKTtcblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBteU1hcCA9IG5ldyB5bWFwcy5NYXAoXCJtYXBcIiwge1xuICAgICAgY2VudGVyOiBbNDcuNTM5NiwgNDIuMDE1MV0sXG4gICAgICBjb250cm9sczogWyd0eXBlU2VsZWN0b3InLCAnZnVsbHNjcmVlbkNvbnRyb2wnLCAnZ2VvbG9jYXRpb25Db250cm9sJywgJ3J1bGVyQ29udHJvbCcsICdyb3V0ZUJ1dHRvbkNvbnRyb2wnXSxcbiAgICAgIHpvb206IDE2XG4gICAgfSk7XG4gICAgdmFyIGNvbnRyb2wgPSBteU1hcC5jb250cm9scy5nZXQoJ3JvdXRlQnV0dG9uQ29udHJvbCcpO1xuICAgIGNvbnRyb2wucm91dGVQYW5lbC5zdGF0ZS5zZXQoJ2Zyb20nLCAn0KDQvtC80LDQvdC+0LLRgdC60LDRjyDRgdC+0Y7Qt9C90YvQuSA5N9CwJyk7XG4gICAgdmFyIG15UGxhY2VtYXJrID0gbmV3IHltYXBzLlBsYWNlbWFyayhbNDcuNTM5OCwgNDIuMDE1M10sIHtcbiAgICAgIGhpbnRDb250ZW50OiAn0KPQuy4g0KHQvtGO0LfQvdCw0Y8gOTfQsCcsXG4gICAgICBiYWxsb29uQ29udGVudDogJ9Cf0L7Qu9C40LrQu9C40L3QuNC60LAnXG4gICAgfSwge1xuICAgICAgcHJlc2V0OiAnaXNsYW5kcyNibHVlTWVkaWNhbEljb24nXG4gICAgfSk7XG4gICAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQobXlQbGFjZW1hcmspO1xuICB9XG5cbiAgeW1hcHMucmVhZHkoaW5pdCk7XG5cbiAgZnVuY3Rpb24gYWRkVGltZUZvb3RlcigpIHtcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgICBtb250aDogJ2xvbmcnLFxuICAgICAgZGF5OiAnbnVtZXJpYydcbiAgICB9O1xuICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtZm9vdGVyLWluZm9fX2RhdGUnKTtcbiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gZGF0ZS50b0xvY2FsZVN0cmluZyhcInJ1XCIsIG9wdGlvbnMpO1xuICB9XG5cbiAgc2V0VGltZW91dChhZGRUaW1lRm9vdGVyLCAxMDApO1xufSk7Il19
