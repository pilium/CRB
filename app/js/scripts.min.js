"use strict";

document.addEventListener("DOMContentLoaded", function () {
  // preloader
  var preloader = document.getElementById('preloader');
  setTimeout(function () {
    preloader.classList.add('active');
    document.body.style.overflow = 'visible';
  }, 3000); // END Preloader

  var container = document.querySelector('.header-actions__search');
  var search = container.querySelector('.icon-magnifier-tool');
  var input = container.querySelector("[type=text]");
  var sliderContainer = document.querySelector('.main-slider');
  var mapContainer = document.getElementById('map');
  var link = document.querySelector(".js-header-info__writeToUs-link");
  var popup = document.querySelector(".modal");
  var close = popup.querySelector(".modal-close__btn");
  var login = popup.querySelector("[name=login]");

  var search_toggle = function search_toggle() {
    search.addEventListener('click', function () {
      toggle_search_class();
      input.focus();
    });
    document.addEventListener("keydown", function (event) {
      if (event.keyCode == 27) {
        if (container.classList.contains("active")) {
          container.classList.remove("active");
        }
      }
    });
    document.addEventListener('click', function (e) {
      var target = e.target;
      var its_container = target == container || container.contains(target);
      var search_is_active = container.classList.contains('active');

      if (!its_container && search_is_active) {
        toggle_search_class();
      }
    });

    var toggle_search_class = function toggle_search_class() {
      container.classList.toggle('active');
    };
  };

  var modal = function modal() {
    link.addEventListener("click", function (event) {
      event.preventDefault();
      popup.classList.toggle("modal-show");
      login.focus();
    });
    close.addEventListener("click", function (event) {
      event.preventDefault();
      popup.classList.remove("modal-show");
    });
  }; // if (sliderContainer) {
  //     new Glide(sliderContainer, {
  //     type: 'slider',
  //     autoplay: 8000,
  //     keybord: true,
  //     hoverpause: true,
  //     rewind: true,
  //     rewindDuration: 1000,
  //     animationTimingFunc: 'bounce'
  // }).mount();
  // }


  var mySwiper = new Swiper('.swiper-container', {
    loop: true,
    parallax: true,
    speed: 1000,
    mousewheelControl: true
  });

  if (mapContainer) {
    var init = function init() {
      var myMap = new ymaps.Map("map", {
        center: [47.5396, 42.0151],
        controls: ['typeSelector', 'fullscreenControl', 'geolocationControl', 'rulerControl', 'routeButtonControl'],
        zoom: 16
      });
      var control = myMap.controls.get('routeButtonControl');
      control.routePanel.state.set('from', 'Романовская союзный 97а');
      var myPlacemark = new ymaps.Placemark([47.5398, 42.0153], {
        hintContent: 'Ул. Союзная 97а',
        balloonContent: 'Поликлиника'
      }, {
        preset: 'islands#blueMedicalIcon'
      });
      myMap.geoObjects.add(myPlacemark);
    };

    ymaps.ready(init);
  }

  function addTimeFooter() {
    var date = new Date();
    var options = {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    };
    var container = document.querySelector('.js-footer-info__date');
    container.innerHTML = date.toLocaleString("ru", options);
  }

  setTimeout(addTimeFooter, 100);
  search_toggle();
  modal();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgLy8gcHJlbG9hZGVyXG4gIHZhciBwcmVsb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJlbG9hZGVyJyk7XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIHByZWxvYWRlci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ3Zpc2libGUnO1xuICB9LCAzMDAwKTsgLy8gRU5EIFByZWxvYWRlclxuXG4gIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLWFjdGlvbnNfX3NlYXJjaCcpO1xuICB2YXIgc2VhcmNoID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5pY29uLW1hZ25pZmllci10b29sJyk7XG4gIHZhciBpbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiW3R5cGU9dGV4dF1cIik7XG4gIHZhciBzbGlkZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1zbGlkZXInKTtcbiAgdmFyIG1hcENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKTtcbiAgdmFyIGxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmpzLWhlYWRlci1pbmZvX193cml0ZVRvVXMtbGlua1wiKTtcbiAgdmFyIHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcbiAgdmFyIGNsb3NlID0gcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1jbG9zZV9fYnRuXCIpO1xuICB2YXIgbG9naW4gPSBwb3B1cC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9bG9naW5dXCIpO1xuXG4gIHZhciBzZWFyY2hfdG9nZ2xlID0gZnVuY3Rpb24gc2VhcmNoX3RvZ2dsZSgpIHtcbiAgICBzZWFyY2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0b2dnbGVfc2VhcmNoX2NsYXNzKCk7XG4gICAgICBpbnB1dC5mb2N1cygpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMjcpIHtcbiAgICAgICAgaWYgKGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcbiAgICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgIHZhciBpdHNfY29udGFpbmVyID0gdGFyZ2V0ID09IGNvbnRhaW5lciB8fCBjb250YWluZXIuY29udGFpbnModGFyZ2V0KTtcbiAgICAgIHZhciBzZWFyY2hfaXNfYWN0aXZlID0gY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJyk7XG5cbiAgICAgIGlmICghaXRzX2NvbnRhaW5lciAmJiBzZWFyY2hfaXNfYWN0aXZlKSB7XG4gICAgICAgIHRvZ2dsZV9zZWFyY2hfY2xhc3MoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciB0b2dnbGVfc2VhcmNoX2NsYXNzID0gZnVuY3Rpb24gdG9nZ2xlX3NlYXJjaF9jbGFzcygpIHtcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBtb2RhbCA9IGZ1bmN0aW9uIG1vZGFsKCkge1xuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHBvcHVwLmNsYXNzTGlzdC50b2dnbGUoXCJtb2RhbC1zaG93XCIpO1xuICAgICAgbG9naW4uZm9jdXMoKTtcbiAgICB9KTtcbiAgICBjbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsLXNob3dcIik7XG4gICAgfSk7XG4gIH07IC8vIGlmIChzbGlkZXJDb250YWluZXIpIHtcbiAgLy8gICAgIG5ldyBHbGlkZShzbGlkZXJDb250YWluZXIsIHtcbiAgLy8gICAgIHR5cGU6ICdzbGlkZXInLFxuICAvLyAgICAgYXV0b3BsYXk6IDgwMDAsXG4gIC8vICAgICBrZXlib3JkOiB0cnVlLFxuICAvLyAgICAgaG92ZXJwYXVzZTogdHJ1ZSxcbiAgLy8gICAgIHJld2luZDogdHJ1ZSxcbiAgLy8gICAgIHJld2luZER1cmF0aW9uOiAxMDAwLFxuICAvLyAgICAgYW5pbWF0aW9uVGltaW5nRnVuYzogJ2JvdW5jZSdcbiAgLy8gfSkubW91bnQoKTtcbiAgLy8gfVxuXG5cbiAgdmFyIG15U3dpcGVyID0gbmV3IFN3aXBlcignLnN3aXBlci1jb250YWluZXInLCB7XG4gICAgbG9vcDogdHJ1ZSxcbiAgICBwYXJhbGxheDogdHJ1ZSxcbiAgICBzcGVlZDogMTAwMCxcbiAgICBtb3VzZXdoZWVsQ29udHJvbDogdHJ1ZVxuICB9KTtcblxuICBpZiAobWFwQ29udGFpbmVyKSB7XG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgdmFyIG15TWFwID0gbmV3IHltYXBzLk1hcChcIm1hcFwiLCB7XG4gICAgICAgIGNlbnRlcjogWzQ3LjUzOTYsIDQyLjAxNTFdLFxuICAgICAgICBjb250cm9sczogWyd0eXBlU2VsZWN0b3InLCAnZnVsbHNjcmVlbkNvbnRyb2wnLCAnZ2VvbG9jYXRpb25Db250cm9sJywgJ3J1bGVyQ29udHJvbCcsICdyb3V0ZUJ1dHRvbkNvbnRyb2wnXSxcbiAgICAgICAgem9vbTogMTZcbiAgICAgIH0pO1xuICAgICAgdmFyIGNvbnRyb2wgPSBteU1hcC5jb250cm9scy5nZXQoJ3JvdXRlQnV0dG9uQ29udHJvbCcpO1xuICAgICAgY29udHJvbC5yb3V0ZVBhbmVsLnN0YXRlLnNldCgnZnJvbScsICfQoNC+0LzQsNC90L7QstGB0LrQsNGPINGB0L7RjtC30L3Ri9C5IDk30LAnKTtcbiAgICAgIHZhciBteVBsYWNlbWFyayA9IG5ldyB5bWFwcy5QbGFjZW1hcmsoWzQ3LjUzOTgsIDQyLjAxNTNdLCB7XG4gICAgICAgIGhpbnRDb250ZW50OiAn0KPQuy4g0KHQvtGO0LfQvdCw0Y8gOTfQsCcsXG4gICAgICAgIGJhbGxvb25Db250ZW50OiAn0J/QvtC70LjQutC70LjQvdC40LrQsCdcbiAgICAgIH0sIHtcbiAgICAgICAgcHJlc2V0OiAnaXNsYW5kcyNibHVlTWVkaWNhbEljb24nXG4gICAgICB9KTtcbiAgICAgIG15TWFwLmdlb09iamVjdHMuYWRkKG15UGxhY2VtYXJrKTtcbiAgICB9O1xuXG4gICAgeW1hcHMucmVhZHkoaW5pdCk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRUaW1lRm9vdGVyKCkge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIHllYXI6ICdudW1lcmljJyxcbiAgICAgIG1vbnRoOiAnbG9uZycsXG4gICAgICBkYXk6ICdudW1lcmljJ1xuICAgIH07XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1mb290ZXItaW5mb19fZGF0ZScpO1xuICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBkYXRlLnRvTG9jYWxlU3RyaW5nKFwicnVcIiwgb3B0aW9ucyk7XG4gIH1cblxuICBzZXRUaW1lb3V0KGFkZFRpbWVGb290ZXIsIDEwMCk7XG4gIHNlYXJjaF90b2dnbGUoKTtcbiAgbW9kYWwoKTtcbn0pOyJdfQ==
