"use strict";

document.addEventListener("DOMContentLoaded", function () {
  // preloader
  var preloader = document.getElementById('preloader');
  setTimeout(function () {
    preloader.classList.add('loaded');
  }, 1000); // END Preloader

  var container = document.querySelector('.header-actions__search');
  var search = container.querySelector('.icon-magnifier-tool');
  var input = container.querySelector("[type=text]");
  var sliderContainer = document.querySelector('.main-slider');
  var mapContainer = document.getElementById('map');
  var link = document.querySelector(".js-header-info__writeToUs-link");
  var popup = document.querySelector(".modal");
  var close = popup.querySelector(".modal-close__btn");
  var login = popup.querySelector("[name=login]");

  var search_toggle = function search_toggle() {
    search.addEventListener('click', function () {
      toggle_search_class();
      input.focus();
    });
    document.addEventListener("keydown", function (event) {
      if (event.keyCode == 27) {
        if (container.classList.contains("active")) {
          container.classList.remove("active");
        }
      }
    });
    document.addEventListener('click', function (e) {
      var target = e.target;
      var its_container = target == container || container.contains(target);
      var search_is_active = container.classList.contains('active');

      if (!its_container && search_is_active) {
        toggle_search_class();
      }
    });

    var toggle_search_class = function toggle_search_class() {
      container.classList.toggle('active');
    };
  };

  var modal = function modal() {
    link.addEventListener("click", function (event) {
      event.preventDefault();
      popup.classList.toggle("modal-show");
      login.focus();
    });
    close.addEventListener("click", function (event) {
      event.preventDefault();
      popup.classList.remove("modal-show");
    });
  };

  if (sliderContainer) {
    new Glide(sliderContainer, {
      type: 'slider',
      autoplay: 8000,
      keybord: true,
      hoverpause: true,
      rewind: true,
      rewindDuration: 1000,
      animationTimingFunc: 'bounce'
    }).mount();
  }

  if (mapContainer) {
    var init = function init() {
      var myMap = new ymaps.Map("map", {
        center: [47.5396, 42.0151],
        controls: ['typeSelector', 'fullscreenControl', 'geolocationControl', 'rulerControl', 'routeButtonControl'],
        zoom: 16
      });
      var control = myMap.controls.get('routeButtonControl');
      control.routePanel.state.set('from', 'Романовская союзный 97а');
      var myPlacemark = new ymaps.Placemark([47.5398, 42.0153], {
        hintContent: 'Ул. Союзная 97а',
        balloonContent: 'Поликлиника'
      }, {
        preset: 'islands#blueMedicalIcon'
      });
      myMap.geoObjects.add(myPlacemark);
    };

    ymaps.ready(init);
  }

  function addTimeFooter() {
    var date = new Date();
    var options = {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    };
    var container = document.querySelector('.js-footer-info__date');
    container.innerHTML = date.toLocaleString("ru", options);
  }

  setTimeout(addTimeFooter, 100);
  search_toggle();
  modal();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XG4gIC8vIHByZWxvYWRlclxuICB2YXIgcHJlbG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZWxvYWRlcicpO1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBwcmVsb2FkZXIuY2xhc3NMaXN0LmFkZCgnbG9hZGVkJyk7XG4gIH0sIDEwMDApOyAvLyBFTkQgUHJlbG9hZGVyXG5cbiAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItYWN0aW9uc19fc2VhcmNoJyk7XG4gIHZhciBzZWFyY2ggPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmljb24tbWFnbmlmaWVyLXRvb2wnKTtcbiAgdmFyIGlucHV0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCJbdHlwZT10ZXh0XVwiKTtcbiAgdmFyIHNsaWRlckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLXNsaWRlcicpO1xuICB2YXIgbWFwQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpO1xuICB2YXIgbGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanMtaGVhZGVyLWluZm9fX3dyaXRlVG9Vcy1saW5rXCIpO1xuICB2YXIgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpO1xuICB2YXIgY2xvc2UgPSBwb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWNsb3NlX19idG5cIik7XG4gIHZhciBsb2dpbiA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT1sb2dpbl1cIik7XG5cbiAgdmFyIHNlYXJjaF90b2dnbGUgPSBmdW5jdGlvbiBzZWFyY2hfdG9nZ2xlKCkge1xuICAgIHNlYXJjaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRvZ2dsZV9zZWFyY2hfY2xhc3MoKTtcbiAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgfSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAyNykge1xuICAgICAgICBpZiAoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xuICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgdmFyIGl0c19jb250YWluZXIgPSB0YXJnZXQgPT0gY29udGFpbmVyIHx8IGNvbnRhaW5lci5jb250YWlucyh0YXJnZXQpO1xuICAgICAgdmFyIHNlYXJjaF9pc19hY3RpdmUgPSBjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKTtcblxuICAgICAgaWYgKCFpdHNfY29udGFpbmVyICYmIHNlYXJjaF9pc19hY3RpdmUpIHtcbiAgICAgICAgdG9nZ2xlX3NlYXJjaF9jbGFzcygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIHRvZ2dsZV9zZWFyY2hfY2xhc3MgPSBmdW5jdGlvbiB0b2dnbGVfc2VhcmNoX2NsYXNzKCkge1xuICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIG1vZGFsID0gZnVuY3Rpb24gbW9kYWwoKSB7XG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcG9wdXAuY2xhc3NMaXN0LnRvZ2dsZShcIm1vZGFsLXNob3dcIik7XG4gICAgICBsb2dpbi5mb2N1cygpO1xuICAgIH0pO1xuICAgIGNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWwtc2hvd1wiKTtcbiAgICB9KTtcbiAgfTtcblxuICBpZiAoc2xpZGVyQ29udGFpbmVyKSB7XG4gICAgbmV3IEdsaWRlKHNsaWRlckNvbnRhaW5lciwge1xuICAgICAgdHlwZTogJ3NsaWRlcicsXG4gICAgICBhdXRvcGxheTogODAwMCxcbiAgICAgIGtleWJvcmQ6IHRydWUsXG4gICAgICBob3ZlcnBhdXNlOiB0cnVlLFxuICAgICAgcmV3aW5kOiB0cnVlLFxuICAgICAgcmV3aW5kRHVyYXRpb246IDEwMDAsXG4gICAgICBhbmltYXRpb25UaW1pbmdGdW5jOiAnYm91bmNlJ1xuICAgIH0pLm1vdW50KCk7XG4gIH1cblxuICBpZiAobWFwQ29udGFpbmVyKSB7XG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgdmFyIG15TWFwID0gbmV3IHltYXBzLk1hcChcIm1hcFwiLCB7XG4gICAgICAgIGNlbnRlcjogWzQ3LjUzOTYsIDQyLjAxNTFdLFxuICAgICAgICBjb250cm9sczogWyd0eXBlU2VsZWN0b3InLCAnZnVsbHNjcmVlbkNvbnRyb2wnLCAnZ2VvbG9jYXRpb25Db250cm9sJywgJ3J1bGVyQ29udHJvbCcsICdyb3V0ZUJ1dHRvbkNvbnRyb2wnXSxcbiAgICAgICAgem9vbTogMTZcbiAgICAgIH0pO1xuICAgICAgdmFyIGNvbnRyb2wgPSBteU1hcC5jb250cm9scy5nZXQoJ3JvdXRlQnV0dG9uQ29udHJvbCcpO1xuICAgICAgY29udHJvbC5yb3V0ZVBhbmVsLnN0YXRlLnNldCgnZnJvbScsICfQoNC+0LzQsNC90L7QstGB0LrQsNGPINGB0L7RjtC30L3Ri9C5IDk30LAnKTtcbiAgICAgIHZhciBteVBsYWNlbWFyayA9IG5ldyB5bWFwcy5QbGFjZW1hcmsoWzQ3LjUzOTgsIDQyLjAxNTNdLCB7XG4gICAgICAgIGhpbnRDb250ZW50OiAn0KPQuy4g0KHQvtGO0LfQvdCw0Y8gOTfQsCcsXG4gICAgICAgIGJhbGxvb25Db250ZW50OiAn0J/QvtC70LjQutC70LjQvdC40LrQsCdcbiAgICAgIH0sIHtcbiAgICAgICAgcHJlc2V0OiAnaXNsYW5kcyNibHVlTWVkaWNhbEljb24nXG4gICAgICB9KTtcbiAgICAgIG15TWFwLmdlb09iamVjdHMuYWRkKG15UGxhY2VtYXJrKTtcbiAgICB9O1xuXG4gICAgeW1hcHMucmVhZHkoaW5pdCk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRUaW1lRm9vdGVyKCkge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIHllYXI6ICdudW1lcmljJyxcbiAgICAgIG1vbnRoOiAnbG9uZycsXG4gICAgICBkYXk6ICdudW1lcmljJ1xuICAgIH07XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1mb290ZXItaW5mb19fZGF0ZScpO1xuICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBkYXRlLnRvTG9jYWxlU3RyaW5nKFwicnVcIiwgb3B0aW9ucyk7XG4gIH1cblxuICBzZXRUaW1lb3V0KGFkZFRpbWVGb290ZXIsIDEwMCk7XG4gIHNlYXJjaF90b2dnbGUoKTtcbiAgbW9kYWwoKTtcbn0pOyJdfQ==
