"use strict";document.addEventListener("DOMContentLoaded",function(){function e(){var e=new Date,t={year:"numeric",month:"long",day:"numeric"};document.querySelector(".js-footer-info__date").innerHTML=e.toLocaleString("ru",t)}var t=document.getElementById("preloader");t&&setTimeout(function(){t.classList.add("active"),document.body.style.overflow="visible"},3e3);var o=document.querySelector(".header-actions__search"),s=o.querySelector(".icon-magnifier-tool"),n=o.querySelector("[type=text]"),a=document.querySelector(".swiper-container"),c=document.querySelector(".blog-slider"),i=document.querySelector(".news-slider"),l=document.getElementById("map"),r=document.querySelector(".js-header-info__writeToUs-link"),d=document.querySelector(".modal"),u=d.querySelector(".modal-close__btn"),m=d.querySelector("[name=login]");if(a){new Swiper(".swiper-container",{loop:!0,parallax:!0,autoplay:{delay:5e3},speed:1e3,mousewheelControl:!0})}if(c){new Swiper(".blog-slider",{spaceBetween:30,effect:"fade",loop:!0,grabCursor:!0,autoplay:{delay:2e3},pagination:{el:".blog-slider__pagination",clickable:!0}})}if(l){var f=function(){var e=new ymaps.Map("map",{center:[47.5396,42.0151],controls:["typeSelector","fullscreenControl","geolocationControl","rulerControl","routeButtonControl"],zoom:16});e.controls.get("routeButtonControl").routePanel.state.set("from","Романовская союзный 97а");var t=new ymaps.Placemark([47.5398,42.0153],{hintContent:"Ул. Союзная 97а",balloonContent:"Поликлиника"},{preset:"islands#blueMedicalIcon"});e.geoObjects.add(t)};ymaps.ready(f)}var v=document.querySelector(".wrapper-menu"),g=document.querySelector(".sidenav"),p=document.querySelector(".sidenav-overlay");v.addEventListener("click",function(){v.classList.toggle("open"),g.classList.toggle("show"),p.classList.toggle("show")}),document.addEventListener("click",function(e){e.target.classList.contains("sidenav-overlay")&&(v.classList.toggle("open"),g.classList.toggle("show"),p.classList.toggle("show"))});var L,y=document.getElementsByClassName("collapsible-header");for(L=0;L<y.length;L++)y[L].addEventListener("click",function(e){e.preventDefault(),this.classList.toggle("active"),this.nextElementSibling.classList.toggle("active")});if(setTimeout(e,100),function(){s.addEventListener("click",function(){e(),n.focus()}),document.addEventListener("keydown",function(e){27==e.keyCode&&o.classList.contains("active")&&o.classList.remove("active")}),document.addEventListener("click",function(t){var s=t.target,n=s==o||o.contains(s),a=o.classList.contains("active");!n&&a&&e()});var e=function(){o.classList.toggle("active")}}(),function(){var e=document.querySelector(".modal-overlay");r.addEventListener("click",function(t){t.preventDefault(),d.classList.toggle("modal-show"),e.classList.toggle("show"),m.focus()}),u.addEventListener("click",function(t){t.preventDefault(),d.classList.remove("modal-show"),e.classList.toggle("show")}),document.addEventListener("click",function(t){t.target.classList.contains("modal-overlay")&&(d.classList.remove("modal-show"),e.classList.toggle("show"))})}(),i){new Swiper(".news-slider",{effect:"coverflow",grabCursor:!0,loop:!0,centeredSlides:!0,keyboard:!0,spaceBetween:0,slidesPerView:"auto",speed:300,coverflowEffect:{rotate:0,stretch:0,depth:0,modifier:3,slideShadows:!1},breakpoints:{480:{spaceBetween:0,centeredSlides:!0}},simulateTouch:!0,navigation:{nextEl:".news-slider-next",prevEl:".news-slider-prev"},pagination:{el:".news-slider__pagination",clickable:!0}})}!function(){for(var e=document.querySelectorAll(".material-card > .mc-btn-action"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){var e=this.parentNode,t=this.querySelector("i");t.classList.add("fa-spin-fast"),e.classList.contains("mc-active")?(e.classList.remove("mc-active"),setTimeout(function(){t.classList.remove("fa-arrow-left"),t.classList.remove("fa-spin-fast"),t.classList.add("fa-bars")},800)):(e.classList.add("mc-active"),setTimeout(function(){t.classList.remove("fa-bars"),t.classList.remove("fa-spin-fast"),t.classList.add("fa-arrow-left")},800))})}()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhZGRUaW1lRm9vdGVyIiwiZGF0ZSIsIkRhdGUiLCJvcHRpb25zIiwieWVhciIsIm1vbnRoIiwiZGF5IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsInRvTG9jYWxlU3RyaW5nIiwicHJlbG9hZGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJzZXRUaW1lb3V0IiwiY2xhc3NMaXN0IiwiYWRkIiwiYm9keSIsInN0eWxlIiwib3ZlcmZsb3ciLCJjb250YWluZXIiLCJzZWFyY2giLCJpbnB1dCIsInNsaWRlckNvbnRhaW5lciIsImJsb2dTbGlkZXIiLCJuZXdzU2xpZGVyIiwibWFwQ29udGFpbmVyIiwibGluayIsInBvcHVwIiwiY2xvc2UiLCJsb2dpbiIsIlN3aXBlciIsImxvb3AiLCJwYXJhbGxheCIsImF1dG9wbGF5IiwiZGVsYXkiLCJzcGVlZCIsIm1vdXNld2hlZWxDb250cm9sIiwic3BhY2VCZXR3ZWVuIiwiZWZmZWN0IiwiZ3JhYkN1cnNvciIsInBhZ2luYXRpb24iLCJlbCIsImNsaWNrYWJsZSIsImluaXQiLCJteU1hcCIsInltYXBzIiwiTWFwIiwiY2VudGVyIiwiY29udHJvbHMiLCJ6b29tIiwiZ2V0Iiwicm91dGVQYW5lbCIsInN0YXRlIiwic2V0IiwibXlQbGFjZW1hcmsiLCJQbGFjZW1hcmsiLCJoaW50Q29udGVudCIsImJhbGxvb25Db250ZW50IiwicHJlc2V0IiwiZ2VvT2JqZWN0cyIsInJlYWR5Iiwid3JhcHBlck1lbnUiLCJzaWRlbmF2Iiwib3ZlcmxheSIsInRvZ2dsZSIsImUiLCJ0YXJnZXQiLCJjb250YWlucyIsImkiLCJhY2MiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibGVuZ3RoIiwicHJldmVudERlZmF1bHQiLCJ0aGlzIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwidG9nZ2xlX3NlYXJjaF9jbGFzcyIsImZvY3VzIiwiZXZlbnQiLCJrZXlDb2RlIiwicmVtb3ZlIiwiaXRzX2NvbnRhaW5lciIsInNlYXJjaF9pc19hY3RpdmUiLCJjZW50ZXJlZFNsaWRlcyIsImtleWJvYXJkIiwic2xpZGVzUGVyVmlldyIsImNvdmVyZmxvd0VmZmVjdCIsInJvdGF0ZSIsInN0cmV0Y2giLCJkZXB0aCIsIm1vZGlmaWVyIiwic2xpZGVTaGFkb3dzIiwiYnJlYWtwb2ludHMiLCI0ODAiLCJzaW11bGF0ZVRvdWNoIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsInBlb3BsZUNhcmQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2kiLCJjYXJkIiwicGFyZW50Tm9kZSIsImljb24iXSwibWFwcGluZ3MiOiJBQUFBLFlBRUFBLFVBQUFDLGlCQUFBLG1CQUFBLFdBcUlBLFFBQUFDLEtBQ0EsR0FBQUMsR0FBQSxHQUFBQyxNQUNBQyxHQUNBQyxLQUFBLFVBQ0FDLE1BQUEsT0FDQUMsSUFBQSxVQUVBUixVQUFBUyxjQUFBLHlCQUNBQyxVQUFBUCxFQUFBUSxlQUFBLEtBQUFOLEdBM0lBLEdBQUFPLEdBQUFaLFNBQUFhLGVBQUEsWUFFQUQsSUFDQUUsV0FBQSxXQUNBRixFQUFBRyxVQUFBQyxJQUFBLFVBQ0FoQixTQUFBaUIsS0FBQUMsTUFBQUMsU0FBQSxXQUNBLElBSUEsSUFBQUMsR0FBQXBCLFNBQUFTLGNBQUEsMkJBQ0FZLEVBQUFELEVBQUFYLGNBQUEsd0JBQ0FhLEVBQUFGLEVBQUFYLGNBQUEsZUFDQWMsRUFBQXZCLFNBQUFTLGNBQUEscUJBQ0FlLEVBQUF4QixTQUFBUyxjQUFBLGdCQUNBZ0IsRUFBQXpCLFNBQUFTLGNBQUEsZ0JBQ0FpQixFQUFBMUIsU0FBQWEsZUFBQSxPQUNBYyxFQUFBM0IsU0FBQVMsY0FBQSxtQ0FDQW1CLEVBQUE1QixTQUFBUyxjQUFBLFVBQ0FvQixFQUFBRCxFQUFBbkIsY0FBQSxxQkFDQXFCLEVBQUFGLEVBQUFuQixjQUFBLGVBNkRBLElBQUFjLEVBQ0EsQ0FBQSxHQUFBUSxRQUFBLHFCQUNBQyxNQUFBLEVBQ0FDLFVBQUEsRUFDQUMsVUFDQUMsTUFBQSxLQUVBQyxNQUFBLElBQ0FDLG1CQUFBLElBSUEsR0FBQWIsRUFDQSxDQUFBLEdBQUFPLFFBQUEsZ0JBQ0FPLGFBQUEsR0FDQUMsT0FBQSxPQUNBUCxNQUFBLEVBQ0FRLFlBQUEsRUFDQU4sVUFDQUMsTUFBQSxLQUdBTSxZQUNBQyxHQUFBLDJCQUNBQyxXQUFBLEtBS0EsR0FBQWpCLEVBQUEsQ0FDQSxHQUFBa0IsR0FBQSxXQUNBLEdBQUFDLEdBQUEsR0FBQUMsT0FBQUMsSUFBQSxPQUNBQyxRQUFBLFFBQUEsU0FDQUMsVUFBQSxlQUFBLG9CQUFBLHFCQUFBLGVBQUEsc0JBQ0FDLEtBQUEsSUFFQUwsR0FBQUksU0FBQUUsSUFBQSxzQkFDQUMsV0FBQUMsTUFBQUMsSUFBQSxPQUFBLDBCQUNBLElBQUFDLEdBQUEsR0FBQVQsT0FBQVUsV0FBQSxRQUFBLFVBQ0FDLFlBQUEsa0JBQ0FDLGVBQUEsZ0JBRUFDLE9BQUEsMkJBRUFkLEdBQUFlLFdBQUE1QyxJQUFBdUMsR0FHQVQsT0FBQWUsTUFBQWpCLEdBZUEsR0FBQWtCLEdBQUE5RCxTQUFBUyxjQUFBLGlCQUNBc0QsRUFBQS9ELFNBQUFTLGNBQUEsWUFDQXVELEVBQUFoRSxTQUFBUyxjQUFBLG1CQUNBcUQsR0FBQTdELGlCQUFBLFFBQUEsV0FDQTZELEVBQUEvQyxVQUFBa0QsT0FBQSxRQUNBRixFQUFBaEQsVUFBQWtELE9BQUEsUUFDQUQsRUFBQWpELFVBQUFrRCxPQUFBLFVBRUFqRSxTQUFBQyxpQkFBQSxRQUFBLFNBQUFpRSxHQUNBQSxFQUFBQyxPQUFBcEQsVUFBQXFELFNBQUEscUJBQ0FOLEVBQUEvQyxVQUFBa0QsT0FBQSxRQUNBRixFQUFBaEQsVUFBQWtELE9BQUEsUUFDQUQsRUFBQWpELFVBQUFrRCxPQUFBLFVBSUEsSUFDQUksR0FEQUMsRUFBQXRFLFNBQUF1RSx1QkFBQSxxQkFHQSxLQUFBRixFQUFBLEVBQUFBLEVBQUFDLEVBQUFFLE9BQUFILElBQ0FDLEVBQUFELEdBQUFwRSxpQkFBQSxRQUFBLFNBQUFpRSxHQUdBQSxFQUFBTyxpQkFDQUMsS0FBQTNELFVBQUFrRCxPQUFBLFVBR0FTLEtBQUFDLG1CQUNBNUQsVUFBQWtELE9BQUEsV0FRQSxJQUpBbkQsV0FBQVosRUFBQSxLQXpKQSxXQUNBbUIsRUFBQXBCLGlCQUFBLFFBQUEsV0FDQTJFLElBQ0F0RCxFQUFBdUQsVUFFQTdFLFNBQUFDLGlCQUFBLFVBQUEsU0FBQTZFLEdBQ0EsSUFBQUEsRUFBQUMsU0FDQTNELEVBQUFMLFVBQUFxRCxTQUFBLFdBQ0FoRCxFQUFBTCxVQUFBaUUsT0FBQSxZQUlBaEYsU0FBQUMsaUJBQUEsUUFBQSxTQUFBaUUsR0FDQSxHQUFBQyxHQUFBRCxFQUFBQyxPQUNBYyxFQUFBZCxHQUFBL0MsR0FBQUEsRUFBQWdELFNBQUFELEdBQ0FlLEVBQUE5RCxFQUFBTCxVQUFBcUQsU0FBQSxXQUVBYSxHQUFBQyxHQUNBTixLQUlBLElBQUFBLEdBQUEsV0FDQXhELEVBQUFMLFVBQUFrRCxPQUFBLGNBSUEsV0FDQSxHQUFBRCxHQUFBaEUsU0FBQVMsY0FBQSxpQkFDQWtCLEdBQUExQixpQkFBQSxRQUFBLFNBQUE2RSxHQUNBQSxFQUFBTCxpQkFDQTdDLEVBQUFiLFVBQUFrRCxPQUFBLGNBQ0FELEVBQUFqRCxVQUFBa0QsT0FBQSxRQUNBbkMsRUFBQStDLFVBRUFoRCxFQUFBNUIsaUJBQUEsUUFBQSxTQUFBNkUsR0FDQUEsRUFBQUwsaUJBQ0E3QyxFQUFBYixVQUFBaUUsT0FBQSxjQUNBaEIsRUFBQWpELFVBQUFrRCxPQUFBLFVBRUFqRSxTQUFBQyxpQkFBQSxRQUFBLFNBQUFpRSxHQUNBQSxFQUFBQyxPQUFBcEQsVUFBQXFELFNBQUEsbUJBQ0F4QyxFQUFBYixVQUFBaUUsT0FBQSxjQUNBaEIsRUFBQWpELFVBQUFrRCxPQUFBLGNBa0hBeEMsRUFDQSxDQUFBLEdBQUFNLFFBQUEsZ0JBQ0FRLE9BQUEsWUFDQUMsWUFBQSxFQUNBUixNQUFBLEVBQ0FtRCxnQkFBQSxFQUNBQyxVQUFBLEVBQ0E5QyxhQUFBLEVBQ0ErQyxjQUFBLE9BQ0FqRCxNQUFBLElBQ0FrRCxpQkFDQUMsT0FBQSxFQUNBQyxRQUFBLEVBQ0FDLE1BQUEsRUFDQUMsU0FBQSxFQUNBQyxjQUFBLEdBRUFDLGFBQ0FDLEtBQ0F2RCxhQUFBLEVBQ0E2QyxnQkFBQSxJQUdBVyxlQUFBLEVBQ0FDLFlBQ0FDLE9BQUEsb0JBQ0FDLE9BQUEscUJBRUF4RCxZQUNBQyxHQUFBLDJCQUNBQyxXQUFBLE1BTUEsV0FHQSxJQUFBLEdBRkF1RCxHQUFBbEcsU0FBQW1HLGlCQUFBLG1DQUVBQyxFQUFBLEVBQUFBLEVBQUFGLEVBQUExQixPQUFBNEIsSUFDQUYsRUFBQUUsR0FBQW5HLGlCQUFBLFFBQUEsV0FDQSxHQUFBb0csR0FBQTNCLEtBQUE0QixXQUNBQyxFQUFBN0IsS0FBQWpFLGNBQUEsSUFDQThGLEdBQUF4RixVQUFBQyxJQUFBLGdCQUVBcUYsRUFBQXRGLFVBQUFxRCxTQUFBLGNBQ0FpQyxFQUFBdEYsVUFBQWlFLE9BQUEsYUFDQWxFLFdBQUEsV0FDQXlGLEVBQUF4RixVQUFBaUUsT0FBQSxpQkFDQXVCLEVBQUF4RixVQUFBaUUsT0FBQSxnQkFDQXVCLEVBQUF4RixVQUFBQyxJQUFBLFlBQ0EsT0FFQXFGLEVBQUF0RixVQUFBQyxJQUFBLGFBQ0FGLFdBQUEsV0FDQXlGLEVBQUF4RixVQUFBaUUsT0FBQSxXQUNBdUIsRUFBQXhGLFVBQUFpRSxPQUFBLGdCQUNBdUIsRUFBQXhGLFVBQUFDLElBQUEsa0JBQ0EiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xuICAvLyBwcmVsb2FkZXJcbiAgdmFyIHByZWxvYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmVsb2FkZXInKTtcblxuICBpZiAocHJlbG9hZGVyKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBwcmVsb2FkZXIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ3Zpc2libGUnO1xuICAgIH0sIDMwMDApO1xuICB9IC8vIEVORCBQcmVsb2FkZXJcblxuXG4gIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLWFjdGlvbnNfX3NlYXJjaCcpO1xuICB2YXIgc2VhcmNoID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5pY29uLW1hZ25pZmllci10b29sJyk7XG4gIHZhciBpbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiW3R5cGU9dGV4dF1cIik7XG4gIHZhciBzbGlkZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLWNvbnRhaW5lcicpO1xuICB2YXIgYmxvZ1NsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ibG9nLXNsaWRlcicpO1xuICB2YXIgbmV3c1NsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdzLXNsaWRlcicpO1xuICB2YXIgbWFwQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpO1xuICB2YXIgbGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuanMtaGVhZGVyLWluZm9fX3dyaXRlVG9Vcy1saW5rXCIpO1xuICB2YXIgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpO1xuICB2YXIgY2xvc2UgPSBwb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWNsb3NlX19idG5cIik7XG4gIHZhciBsb2dpbiA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT1sb2dpbl1cIik7XG5cbiAgdmFyIHNlYXJjaF90b2dnbGUgPSBmdW5jdGlvbiBzZWFyY2hfdG9nZ2xlKCkge1xuICAgIHNlYXJjaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRvZ2dsZV9zZWFyY2hfY2xhc3MoKTtcbiAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgfSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAyNykge1xuICAgICAgICBpZiAoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xuICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgdmFyIGl0c19jb250YWluZXIgPSB0YXJnZXQgPT0gY29udGFpbmVyIHx8IGNvbnRhaW5lci5jb250YWlucyh0YXJnZXQpO1xuICAgICAgdmFyIHNlYXJjaF9pc19hY3RpdmUgPSBjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKTtcblxuICAgICAgaWYgKCFpdHNfY29udGFpbmVyICYmIHNlYXJjaF9pc19hY3RpdmUpIHtcbiAgICAgICAgdG9nZ2xlX3NlYXJjaF9jbGFzcygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIHRvZ2dsZV9zZWFyY2hfY2xhc3MgPSBmdW5jdGlvbiB0b2dnbGVfc2VhcmNoX2NsYXNzKCkge1xuICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIG1vZGFsID0gZnVuY3Rpb24gbW9kYWwoKSB7XG4gICAgdmFyIG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtb3ZlcmxheScpO1xuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHBvcHVwLmNsYXNzTGlzdC50b2dnbGUoXCJtb2RhbC1zaG93XCIpO1xuICAgICAgb3ZlcmxheS5jbGFzc0xpc3QudG9nZ2xlKCdzaG93Jyk7XG4gICAgICBsb2dpbi5mb2N1cygpO1xuICAgIH0pO1xuICAgIGNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWwtc2hvd1wiKTtcbiAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsLW92ZXJsYXknKSkge1xuICAgICAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWwtc2hvd1wiKTtcbiAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QudG9nZ2xlKCdzaG93Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07IC8vIGlmIChzbGlkZXJDb250YWluZXIpIHtcbiAgLy8gICAgIG5ldyBHbGlkZShzbGlkZXJDb250YWluZXIsIHtcbiAgLy8gICAgIHR5cGU6ICdzbGlkZXInLFxuICAvLyAgICAgYXV0b3BsYXk6IDgwMDAsXG4gIC8vICAgICBrZXlib3JkOiB0cnVlLFxuICAvLyAgICAgaG92ZXJwYXVzZTogdHJ1ZSxcbiAgLy8gICAgIHJld2luZDogdHJ1ZSxcbiAgLy8gICAgIHJld2luZER1cmF0aW9uOiAxMDAwLFxuICAvLyAgICAgYW5pbWF0aW9uVGltaW5nRnVuYzogJ2JvdW5jZSdcbiAgLy8gfSkubW91bnQoKTtcbiAgLy8gfVxuXG5cbiAgaWYgKHNsaWRlckNvbnRhaW5lcikge1xuICAgIHZhciBteVN3aXBlciA9IG5ldyBTd2lwZXIoJy5zd2lwZXItY29udGFpbmVyJywge1xuICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgIHBhcmFsbGF4OiB0cnVlLFxuICAgICAgYXV0b3BsYXk6IHtcbiAgICAgICAgZGVsYXk6IDUwMDBcbiAgICAgIH0sXG4gICAgICBzcGVlZDogMTAwMCxcbiAgICAgIG1vdXNld2hlZWxDb250cm9sOiB0cnVlXG4gICAgfSk7XG4gIH1cblxuICBpZiAoYmxvZ1NsaWRlcikge1xuICAgIHZhciBzd2lwZXIgPSBuZXcgU3dpcGVyKCcuYmxvZy1zbGlkZXInLCB7XG4gICAgICBzcGFjZUJldHdlZW46IDMwLFxuICAgICAgZWZmZWN0OiAnZmFkZScsXG4gICAgICBsb29wOiB0cnVlLFxuICAgICAgZ3JhYkN1cnNvcjogdHJ1ZSxcbiAgICAgIGF1dG9wbGF5OiB7XG4gICAgICAgIGRlbGF5OiAyMDAwXG4gICAgICB9LFxuICAgICAgLy8gYXV0b0hlaWdodDogdHJ1ZSxcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgZWw6ICcuYmxvZy1zbGlkZXJfX3BhZ2luYXRpb24nLFxuICAgICAgICBjbGlja2FibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGlmIChtYXBDb250YWluZXIpIHtcbiAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICB2YXIgbXlNYXAgPSBuZXcgeW1hcHMuTWFwKFwibWFwXCIsIHtcbiAgICAgICAgY2VudGVyOiBbNDcuNTM5NiwgNDIuMDE1MV0sXG4gICAgICAgIGNvbnRyb2xzOiBbJ3R5cGVTZWxlY3RvcicsICdmdWxsc2NyZWVuQ29udHJvbCcsICdnZW9sb2NhdGlvbkNvbnRyb2wnLCAncnVsZXJDb250cm9sJywgJ3JvdXRlQnV0dG9uQ29udHJvbCddLFxuICAgICAgICB6b29tOiAxNlxuICAgICAgfSk7XG4gICAgICB2YXIgY29udHJvbCA9IG15TWFwLmNvbnRyb2xzLmdldCgncm91dGVCdXR0b25Db250cm9sJyk7XG4gICAgICBjb250cm9sLnJvdXRlUGFuZWwuc3RhdGUuc2V0KCdmcm9tJywgJ9Cg0L7QvNCw0L3QvtCy0YHQutCw0Y8g0YHQvtGO0LfQvdGL0LkgOTfQsCcpO1xuICAgICAgdmFyIG15UGxhY2VtYXJrID0gbmV3IHltYXBzLlBsYWNlbWFyayhbNDcuNTM5OCwgNDIuMDE1M10sIHtcbiAgICAgICAgaGludENvbnRlbnQ6ICfQo9C7LiDQodC+0Y7Qt9C90LDRjyA5N9CwJyxcbiAgICAgICAgYmFsbG9vbkNvbnRlbnQ6ICfQn9C+0LvQuNC60LvQuNC90LjQutCwJ1xuICAgICAgfSwge1xuICAgICAgICBwcmVzZXQ6ICdpc2xhbmRzI2JsdWVNZWRpY2FsSWNvbidcbiAgICAgIH0pO1xuICAgICAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQobXlQbGFjZW1hcmspO1xuICAgIH07XG5cbiAgICB5bWFwcy5yZWFkeShpbml0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFRpbWVGb290ZXIoKSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgeWVhcjogJ251bWVyaWMnLFxuICAgICAgbW9udGg6ICdsb25nJyxcbiAgICAgIGRheTogJ251bWVyaWMnXG4gICAgfTtcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWZvb3Rlci1pbmZvX19kYXRlJyk7XG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IGRhdGUudG9Mb2NhbGVTdHJpbmcoXCJydVwiLCBvcHRpb25zKTtcbiAgfSAvLyBIYW1idXJnZXJcblxuXG4gIHZhciB3cmFwcGVyTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53cmFwcGVyLW1lbnUnKTtcbiAgdmFyIHNpZGVuYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZW5hdicpO1xuICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWRlbmF2LW92ZXJsYXknKTtcbiAgd3JhcHBlck1lbnUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgd3JhcHBlck1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xuICAgIHNpZGVuYXYuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xuICB9KTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NpZGVuYXYtb3ZlcmxheScpKSB7XG4gICAgICB3cmFwcGVyTWVudS5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XG4gICAgICBzaWRlbmF2LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKTtcbiAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xuICAgIH1cbiAgfSk7IC8vIGFjY29yZGlvblxuXG4gIHZhciBhY2MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY29sbGFwc2libGUtaGVhZGVyXCIpO1xuICB2YXIgaTtcblxuICBmb3IgKGkgPSAwOyBpIDwgYWNjLmxlbmd0aDsgaSsrKSB7XG4gICAgYWNjW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgLyogVG9nZ2xlIGJldHdlZW4gYWRkaW5nIGFuZCByZW1vdmluZyB0aGUgXCJhY3RpdmVcIiBjbGFzcyxcclxuICAgICAgdG8gaGlnaGxpZ2h0IHRoZSBidXR0b24gdGhhdCBjb250cm9scyB0aGUgcGFuZWwgKi9cbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcbiAgICAgIC8qIFRvZ2dsZSBiZXR3ZWVuIGhpZGluZyBhbmQgc2hvd2luZyB0aGUgYWN0aXZlIHBhbmVsICovXG5cbiAgICAgIHZhciBwYW5lbCA9IHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgcGFuZWwuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgfSk7XG4gIH1cblxuICBzZXRUaW1lb3V0KGFkZFRpbWVGb290ZXIsIDEwMCk7XG4gIHNlYXJjaF90b2dnbGUoKTtcbiAgbW9kYWwoKTsgLy8gc3dpcGVyIHNsaWRlcnRlc3RcblxuICBpZiAobmV3c1NsaWRlcikge1xuICAgIHZhciBzd2lwZXIgPSBuZXcgU3dpcGVyKCcubmV3cy1zbGlkZXInLCB7XG4gICAgICBlZmZlY3Q6ICdjb3ZlcmZsb3cnLFxuICAgICAgZ3JhYkN1cnNvcjogdHJ1ZSxcbiAgICAgIGxvb3A6IHRydWUsXG4gICAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcbiAgICAgIGtleWJvYXJkOiB0cnVlLFxuICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxuICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxuICAgICAgc3BlZWQ6IDMwMCxcbiAgICAgIGNvdmVyZmxvd0VmZmVjdDoge1xuICAgICAgICByb3RhdGU6IDAsXG4gICAgICAgIHN0cmV0Y2g6IDAsXG4gICAgICAgIGRlcHRoOiAwLFxuICAgICAgICBtb2RpZmllcjogMyxcbiAgICAgICAgc2xpZGVTaGFkb3dzOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIGJyZWFrcG9pbnRzOiB7XG4gICAgICAgIDQ4MDoge1xuICAgICAgICAgIHNwYWNlQmV0d2VlbjogMCxcbiAgICAgICAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2ltdWxhdGVUb3VjaDogdHJ1ZSxcbiAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgbmV4dEVsOiAnLm5ld3Mtc2xpZGVyLW5leHQnLFxuICAgICAgICBwcmV2RWw6ICcubmV3cy1zbGlkZXItcHJldidcbiAgICAgIH0sXG4gICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIGVsOiAnLm5ld3Mtc2xpZGVyX19wYWdpbmF0aW9uJyxcbiAgICAgICAgY2xpY2thYmxlOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gIH0gLy8gcGVvcGxlQ2FyZFxuXG5cbiAgZnVuY3Rpb24gcGVvcGxlQ2FyZCgpIHtcbiAgICB2YXIgcGVvcGxlQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYXRlcmlhbC1jYXJkID4gLm1jLWJ0bi1hY3Rpb24nKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBwZW9wbGVDYXJkLmxlbmd0aDsgX2krKykge1xuICAgICAgcGVvcGxlQ2FyZFtfaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjYXJkID0gdGhpcy5wYXJlbnROb2RlO1xuICAgICAgICB2YXIgaWNvbiA9IHRoaXMucXVlcnlTZWxlY3RvcignaScpO1xuICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ2ZhLXNwaW4tZmFzdCcpO1xuXG4gICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnbWMtYWN0aXZlJykpIHtcbiAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ21jLWFjdGl2ZScpO1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdmYS1hcnJvdy1sZWZ0Jyk7XG4gICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLXNwaW4tZmFzdCcpO1xuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdmYS1iYXJzJyk7XG4gICAgICAgICAgfSwgODAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ21jLWFjdGl2ZScpO1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdmYS1iYXJzJyk7XG4gICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLXNwaW4tZmFzdCcpO1xuICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdmYS1hcnJvdy1sZWZ0Jyk7XG4gICAgICAgICAgfSwgODAwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgO1xuICBwZW9wbGVDYXJkKCk7XG59KTsiXX0=
